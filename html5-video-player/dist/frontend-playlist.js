(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=React;var a=e.n(t);const r=ReactDOM,l=e=>{let t=null;try{t=JSON.parse(e)}catch(e){console.warn(e.message)}return t};const i=function(e){return/^(?:(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?([a-zA-Z0-9_-]+))$/.test(e)?e:!!/^[a-zA-Z0-9_-]{11}$/.test(e)&&`https://www.youtube.com/watch?v=${e}`};const s=function(e){if(!e)return!1;const t=/^(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/(video\/)?(\d+)(\/[^\s]*)?$/,a=e?.match(t)?.[5];return a?`https://player.vimeo.com/video/${a}`:isNaN(e)?t.test(e):`https://player.vimeo.com/video/${e}`};function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o.apply(null,arguments)}const c=e=>{let{captions:t,poster:r,source:l,qualities:i,isPremium:s,className:c="",reference:n,...d}=e;return a().createElement(a().Fragment,null,a().createElement("video",o({crossOrigin:!0,className:c,id:"player","data-poster":r||"",ref:n,src:l},d,{style:{width:"100%",maxWidth:"100%"}}),s&&a().createElement(a().Fragment,null,Array.isArray(t)&&t.map(((e,t)=>{if(!e.caption_file)return;const r=e.label.split("/");return a().createElement("track",{key:t,kind:"captions",srcLang:r[1]||" ",label:r[0]||"no label",src:e.caption_file})})),!["m3u8","mpd"].includes(l?.split(".").pop())&&a().createElement(a().Fragment,null,a().createElement("source",{src:l,size:720,type:`video/${l?.split(".").pop()}`}),Array.isArray(i)&&i.map(((e,t)=>{}))))),d["data-poster"]&&a().createElement("div",{className:"preload_poster",style:{background:`url(${d["data-poster"]})`}}))};function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n.apply(null,arguments)}const d=e=>{let{source:t="https://www.youtube.com/watch?v=MLpWrANjFbI",className:a="",...r}=e;return React.createElement("div",n({className:`plyr__video-embed ${a}`,id:"player"},r),React.createElement("iframe",{src:`${t}?origin=${window.location.origin}&iv_load_policy=3&amp;modestbranding=1&amp;playsinline=1&amp;showinfo=0&amp;rel=0&amp;enablejsapi=1`,allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),r["data-poster"]&&React.createElement("div",{className:"preload_poster",style:{background:`url(${r["data-poster"]})`}}))};function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},m.apply(null,arguments)}const u=e=>{let{source:t="https://player.vimeo.com/video/76979871",className:r="",...l}=e;return a().createElement("div",m({className:`plyr__video-embed ${r}`,id:"player"},l),a().createElement("iframe",{src:`${t}?loop=false&amp;byline=false&amp;portrait=false&amp;title=false&amp;speed=true&amp;transparent=0&amp;gesture=media`,allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),l["data-poster"]&&a().createElement("div",{className:"preload_poster",style:{background:`url(${l["data-poster"]})`}}))},p=e=>{let{video:a,options:r,player:l,setPlayer:o}=e;const{video_source:n,h5vp_video_source:m,video_thumb:p,video_title:v,h5vp_video_provider:y}=a,[_,f]=(0,t.useState)(null),[E,h]=(0,t.useState)(!1),b=(0,t.useRef)();return(0,t.useEffect)((()=>{if(l){const e={src:"library"===y?n:m};"library"===y?e.type="video/mp4":e.provider=y,l.source={type:"video",sources:[e]},E&&l?.on("ready",(()=>{l.play()}))}else{document.querySelectorAll("#player_library, #player_youtube, #player_vimeo").forEach((e=>{e.classList.add("hidden")}));const e=b.current?.querySelector(`#player_${y}`);if(e){e.classList.remove("hidden");const t=new Plyr(e,r);o(t),h(!0)}}}),[a]),(0,t.useEffect)((()=>{l?.on("ready",(()=>{b.current?.parentNode?.parentNode?.classList.add("playlist_loaded")}))}),[l]),React.createElement("div",{className:"video__main",ref:b},React.createElement("div",{className:"video__thumb video__thumb--big mb-1"},React.createElement(c,{style:{aspectRatio:"16/9"},id:"player_library","data-poster":p,qualities:[],captions:[],source:n,src:n,isPremium:!0}),React.createElement(d,{id:"player_youtube",source:i(m),"data-poster":p}),React.createElement(u,{id:"player_vimeo",source:s(m),"data-poster":p})))};const v=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},y=e=>{let{styles:a={},uniqueId:r}=e;const[l,i]=(0,t.useState)(null);return(0,t.useEffect)((()=>{let e="";"object"==typeof a&&Object.keys(a).map((t=>{if("object"==typeof a[t]){let l="";Object.keys(a[t]).map((e=>{l+=`${v(e)}: ${a[t][e]};`})),e+=`#${r} ${[".","#"].includes(t[0])?"":"."}${t}{${l}} `}})),i(e)}),[a,r]),React.createElement("style",{dangerouslySetInnerHTML:{__html:l}})},_=e=>{let{attributes:r,nonce:l}=e;const{videos:i,styles:s,options:o,uniqueId:c}=r,[n,d]=(0,t.useState)(i?.[0]||{}),[m,u]=(0,t.useState)(0),[v,_]=(0,t.useState)(null),f=(0,t.useRef)();return(0,t.useEffect)((()=>{setTimeout((()=>{f.current&&(f.current.querySelector(".video__right").style.height=f.current.querySelector(".video__left .video__main").offsetHeight+"px")}),100)}),[n]),(0,t.useEffect)((()=>{v&&o.autoplayNextVideo&&v.on("ended",(()=>{const e=document.querySelector(".item-active"),t=e.nextElementSibling?.dataset?.index||0;t&&u(t)}))}),[v]),(0,t.useEffect)((()=>{window.currentIndex=m,d(i[m]||i[0]),document.querySelectorAll(".item-active").forEach((e=>{e.classList.remove("item-active")})),document.querySelector(`.video-item[data-index="${m}"]`)?.classList.add("item-active")}),[m]),a().createElement("div",{id:c,className:"video video--bg",ref:f},a().createElement(y,{styles:s,uniqueId:c}),a().createElement("div",{className:"h5vp_playlist_container"},a().createElement("div",{className:"video__left video__wrapper"},a().createElement(p,{video:n,options:o,player:v,setPlayer:_})),a().createElement("div",{className:"video__right video__wrapper",style:{aspectRatio:"4/4.3",overflow:"hidden"}},i.map(((e,t)=>{const{video_thumb:r,video_source:l,video_title:i,video_desc:s,h5vp_video_provider:o}=e;return a().createElement("div",{key:t,className:`video-item video-item-${t} ${m===t?"item-active":""}`,onClick:()=>{d(e),u(t)},"data-index":t},a().createElement("div",{className:"video-block"},a().createElement("div",{className:"video-block__container video__container"},a().createElement("div",{className:"video__thumb video__thumb--small"},a().createElement("img",{src:r,alt:"video"}))),a().createElement("div",{className:"video-block__content"},a().createElement("h2",{title:i,className:"video-block__title video-block__title--small"},i),a().createElement("p",{className:"video-block__description"},s," "))))})))))},f=e=>{let{attributes:r,nonce:l}=e;const{videos:i,styles:s,options:o,uniqueId:c}=r,[n,d]=(0,t.useState)(i?.[0]||{}),[m,u]=(0,t.useState)(0),[v,_]=(0,t.useState)(null),f=(0,t.useRef)();return(0,t.useEffect)((()=>{setTimeout((()=>{f.current}),100)}),[n]),(0,t.useEffect)((()=>{v&&o.autoplayNextVideo&&v.on("ended",(()=>{const e=document.querySelector(".item-active"),t=e.nextElementSibling?.dataset?.index||0;t&&u(t)}))}),[v]),(0,t.useEffect)((()=>{window.currentIndex=m,d(i[m]||i[0]),document.querySelectorAll(".item-active").forEach((e=>{e.classList.remove("item-active")})),document.querySelector(`.video-item[data-index="${m}"]`)?.classList.add("item-active"),console.log({currentIndex:m})}),[m]),a().createElement("div",{id:c,className:"video video--bg simplelist",ref:f},a().createElement(y,{styles:s,uniqueId:c}),a().createElement("div",{className:"h5vp_playlist_container"},a().createElement("div",{className:"video__top video__wrapper"},a().createElement(p,{video:n,options:o,player:v,setPlayer:_})),a().createElement("div",{className:"video__top"},i.map(((e,t)=>a().createElement(a().Fragment,null,a().createElement("li",{key:t,className:`video-item video-item-${t} ${m===t?"item-active":""}`,onClick:()=>{d(e),u(t)},"data-index":t},a().createElement("a",{href:"#",className:"h5vp_playlist_item","data-provider":e.h5vp_video_provider,"data-poster":e.video_thumb,"data-videoindex":"0","data-source":e.h5vp_video_source},a().createElement("div",{className:"overlay"}),a().createElement("div",{className:"noImage"}),a().createElement("div",{className:"svg"},m===t?a().createElement("svg",{"aria-hidden":"true",focusable:"false"},a().createElement("use",{xlinkHref:"#plyr-pause"})):a().createElement("svg",{"aria-hidden":"true",focusable:"false"},a().createElement("use",{xlinkHref:"#plyr-play"}))),a().createElement("video",{src:"https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4",style:{display:"none"}})),a().createElement("div",{className:"video_title"},a().createElement("h3",{className:"title"},e.video_title)))))))))},E=e=>{let{attributes:r,nonce:l}=e;const{videos:i,styles:s,options:o,uniqueId:c}=r,[n,d]=(0,t.useState)(i?.[0]||{}),[m,u]=(0,t.useState)(0),[v,_]=(0,t.useState)(null),f=(0,t.useRef)();return(0,t.useEffect)((()=>{setTimeout((()=>{f.current}),100)}),[n]),(0,t.useEffect)((()=>{if(f.current){let e="50px";const t=f.current.querySelectorAll(".video_title .title");t.forEach((t=>{const a=getComputedStyle(t).height;a>e&&(e=a)})),t.forEach((t=>t.style.height=e)),jQuery(f.current.querySelector(".list_items")).owlCarousel({nav:!0,responsive:{0:{items:1},480:{items:2},769:{items:3}}}),f.current.querySelector(".list_items").classList.add("owl-carousel"),f.current.querySelectorAll(".h5vp_playlist_item").forEach((e=>e.addEventListener("click",(e=>e.preventDefault()))))}}),[]),(0,t.useEffect)((()=>{v&&o.autoplayNextVideo&&v.on("ended",(()=>{const e=document.querySelector(".item-active"),t=e.nextElementSibling?.dataset?.index||0;t&&u(t)}))}),[v]),(0,t.useEffect)((()=>{window.currentIndex=m,d(i[m]||i[0]),document.querySelectorAll(".item-active").forEach((e=>{e.classList.remove("item-active")})),document.querySelector(`.video-item[data-index="${m}"]`)?.classList.add("item-active"),console.log({currentIndex:m})}),[m]),a().createElement("div",{id:c,className:"video video--bg listwithposter",ref:f},a().createElement(y,{styles:s,uniqueId:c}),a().createElement("div",{className:"h5vp_playlist_container "},a().createElement("div",{className:"video__top video__wrapper"},a().createElement(p,{video:n,options:o,player:v,setPlayer:_})),a().createElement("div",{className:"video__top list_items "},i.map(((e,t)=>a().createElement(a().Fragment,null,a().createElement("li",{key:t,className:`video-item video-item-${t} ${m===t?"item-active":""}`,onClick:()=>{d(e),u(t)},"data-index":t},a().createElement("a",{href:"#",className:"h5vp_playlist_item","data-provider":e.h5vp_video_provider,"data-poster":e.video_thumb,"data-videoindex":"0","data-source":e.h5vp_video_source},a().createElement("div",{className:"overlay"}),e.video_thumb?a().createElement("img",{decoding:"async",className:"video_thumb",src:e.video_thumb,alt:""}):a().createElement("div",{className:"noImage"}),a().createElement("div",{className:"svg"},m===t?a().createElement("svg",{"aria-hidden":"true",focusable:"false"},a().createElement("use",{xlinkHref:"#plyr-pause"})):a().createElement("svg",{"aria-hidden":"true",focusable:"false"},a().createElement("use",{xlinkHref:"#plyr-play"}))),a().createElement("video",{src:"https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4",style:{display:"none"}})),a().createElement("div",{className:"video_title"},a().createElement("h3",{className:"title"},e.video_title)))))))))};document.addEventListener("DOMContentLoaded",(function(){b()}));const h=e=>{const{playlistType:t}=e.attributes;return console.log(e),"simplelist"===t?a().createElement(f,e):"listwithposter"===t?a().createElement(E,e):a().createElement(_,e)},b=()=>{const e=document.querySelectorAll(".h5vp_playlist");e?.forEach((e=>{const t=l(e.dataset.attributes);if(e.removeAttribute("data-attributes"),e.removeAttribute("data-data"),!t)return!1;const i=e.dataset.nonce;if("object"==typeof t&&e){(0,r.createRoot)(e).render(a().createElement(h,{attributes:t,nonce:i}))}}))}})();
//# sourceMappingURL=frontend-playlist.js.map