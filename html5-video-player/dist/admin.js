(()=>{"use strict";var e={855:(e,t,n)=>{var o=n(444);o.createRoot,o.hydrateRoot},444:e=>{e.exports=ReactDOM}},t={};React;(function n(o){var a=t[o];if(void 0!==a)return a.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,n),c.exports})(855);function n(e,t){const n=document.querySelector(".h5vp_licence_notice"),o=document.createElement("div");o.classList=`notice ${e}`,o.innerText=t,n.appendChild(o),setTimeout((()=>{o.remove(),"notice-success"==e&&location.reload()}),3e3),setTimeout((()=>{"notice-success"==e&&location.reload()}),1e3)}jQuery(document).ready((function(){let e="https://bplugins.com/";"localhost"===location.host&&(e="http://localhost/freemius/");const t={endpoint:e+"wp-json/license/v1/gumroad",product:["h5vp","h5vpp","cKpNL"],gumroadEndpoint:"https://api.gumroad.com/v2/licenses/verify",website:h5vpAdmin?.website,ajaxUrl:h5vpAdmin?.ajaxUrl,email:h5vpAdmin?.email},o=document.querySelector(".h5vp_licence"),a=document.querySelector(".h5vp_licence_popup"),c=document.querySelector(".h5vp_license_agreed"),r=document.querySelector(".h5vp_active_license"),i=document.querySelector(".h5vp_deactive_license"),s=document.querySelectorAll(".h5vp_closer");o?.addEventListener("click",(function(e){e.preventDefault(),a.style.display="block"})),s.forEach((function(e){e?.addEventListener("click",(function(e){a.style.display="none"}))})),c?.addEventListener("click",(function(){r.disabled=!c?.checked})),r?.addEventListener("click",(function(e){e.preventDefault();const o=document.querySelector(".h5vp_licence_key");o.value?async function(e,t){let o={},a=!1;try{o=await jQuery.ajax({url:e.gumroadEndpoint,data:{product_permalink:e.product[0],license_key:t},method:"POST"})}catch{o={success:!1}}if(!o?.success)try{o=await jQuery.ajax({url:e.gumroadEndpoint,data:{product_permalink:e.product[1],license_key:t},method:"POST"}),a=!0}catch{o={success:!1}}if(!o?.success)try{o=await jQuery.ajax({url:e.gumroadEndpoint,data:{product_permalink:e.product[2],license_key:t},method:"POST"}),a=!0}catch{return n("notice-error","Please input a Valid licence key")}if(!o?.success)return n("notice-error","Please input a Valid licence key");{let c=1;"(5 Sites)"===o?.purchase?.variants?c=5:"( 3 Sites)"===o?.purchase?.variants?c=3:"(Developer)"===o?.purchase?.variants?c=1e3:"(Single Sites)"===o?.purchase?.variants&&(c=1),jQuery.ajax({url:e.endpoint,data:{license_key:t,quantity:c,website:e.website,product:e.product[0],email:e.email,isAppSumo:a,action:"add"},method:"POST",success:function(o){o?.active?jQuery.ajax({url:e?.ajaxUrl,data:{license_key:t,activated:o?.active,action:"h5vp_active_licence_key"},method:"GET",success:function(e){n(o?.class,o?.message)}}):n(o?.class,o?.message)},error:function(e){return console.log("response",e),n("notice-error","Somethin went wrong! please try again. failed in ajax")}})}}(t,o.value):n("notice-warning","Please input a licence key")})),i?.addEventListener("click",(function(){const e=document.querySelector(".h5vp_licence_key");!async function(e,t){let o={};try{o=await jQuery.ajax({url:e.gumroadEndpoint,data:{product_permalink:e.product[0],license_key:t},method:"POST"})}catch{o={success:!0}}if(!o?.success)try{o=await jQuery.ajax({url:e.gumroadEndpoint,data:{product_permalink:e.product[1],license_key:t},method:"POST"})}catch{return n("notice-error","Please input a Valid licence key")}if(!o?.success)return n("notice-error","Please input a Valid licence key");jQuery.ajax({url:e.endpoint,data:{license_key:t,website:e.website,action:"deactive",product:e.product[0]},method:"POST",success:t=>{t?.deactive?jQuery.ajax({url:e.ajaxUrl,data:{license_key:"",activated:t.active,action:"h5vp_active_licence_key"},method:"GET",success:function(e){e&&n(t?.class,t?.message)}}):n(t?.class,t?.message)},error:e=>{n("notice-error","Sorry, Plugin deactivation failed!")}})}(t,e.value)}))}));var o;(o=jQuery)(document).ready((function(){o(".h5vp_import_data").on("click",(function(e){e.preventDefault(),o.ajax({url:h5vpAdmin?.ajaxUrl,data:{action:"h5vp_import_data_ajax"},success:e=>{const t=JSON.parse(e);!0===t?.success&&(location.href=location.href+"?h5ap-import=success")}})})),o(".h5vp_player_type .csf-fieldset .csf--button-group .csf--button").on("click",(function(){setTimeout((()=>{o(".h5vp_player_type_controls").addClass("h5vp_player_controls_click_trigger newclassbro"),o(".h5vp_player_controls_click_trigger").removeClass("h5vp_player_type_controls");const e=o(this).parent(".csf--button-group").find(".csf--active input").val();o('.h5vp_player_controls_click_trigger .csf-fieldset .csf--button-group .csf--button input[value="'+e+'"]').parent().trigger("click"),o(".h5vp_player_controls_click_trigger").removeClass("h5vp_player_controls_click_trigger")}),100),setTimeout((()=>{o(".newclassbro").addClass("h5vp_player_type_controls")}),1e3)})),o(".h5vp_player_type_controls .csf-fieldset .csf--button-group .csf--button").on("click",(function(){setTimeout((()=>{o(".h5vp_player_type").addClass("h5vp_player_click_trigger"),o(".h5vp_player_controls_click_trigger").removeClass("h5vp_player_type");const e=o(this).parent(".csf--button-group").find(".csf--active input").val();o('.h5vp_player_click_trigger .csf-fieldset .csf--button-group .csf--button input[value="'+e+'"]').parent().trigger("click"),o(".h5vp_player_click_trigger").removeClass("h5vp_player_click_trigger")}),100),setTimeout((()=>{o(".h5vp_player_click_trigger").addClass("h5vp_player_type")}),1e3)})),o(".h5vp_duplicate_player").on("click",(function(e){e.preventDefault(),o.post(h5vpAdmin.ajaxUrl,{action:"h5vp_dulicate_player",postid:o(this).data("postid"),security:o(this).attr("security")},(function(e){if(e){let e=window.location.href;e.split("?").length>1?e+="&duplicate=success":e+="?duplicate=success",window.location.href=e}}))})),"-1"!=window.location.href.search("duplicate=success")&&window.history.pushState({urlPath:"edit.php?post_type=videoplayer"},"","edit.php?post_type=videoplayer"),o(document).on("click",".h5vp_front_shortcode input",(function(e){e.preventDefault();let t=o(this).parent().find("input")[0];t.select(),t.setSelectionRange(0,30),document.execCommand("copy"),o(this).parent().find(".htooltip").text("Copied Successfully!")})),o(document).on("mouseout",".h5vp_front_shortcode input",(function(){o(this).parent().find(".htooltip").text("Copy To Clipboard")})),o(".h5vp_show_password").on("click",(function(){"password"==o(this).parent().find("input").attr("type")?o(this).parent().find("input").attr("type","text"):o(this).parent().find("input").attr("type","password")})),o(".h5vp-analytics table tr").on("click",(function(){this.getAttribute("to")&&(location.href=location.href.match(/(.+)&page=analytics/g)[0]+`&${this.getAttribute("to")}`)}));const e=document.getElementById("myChart"),t={type:"line",data:{labels:e&&e.getAttribute("data-labels")&&JSON.parse(e.getAttribute("data-labels")),datasets:[{label:"Views",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",color:"rgb(255, 99, 132)",data:e&&e.getAttribute("data-data")&&JSON.parse(e.getAttribute("data-data")),tension:.4}]},options:{},plugins:[{id:e&&e.getAttribute("id"),beforeDraw:e=>{const t=e.canvas.getContext("2d");t.save(),t.globalCompositeOperation="destination-over",t.fillStyle="#fff",t.fillRect(0,0,e.width,e.height),t.restore()}}]};if(e){var n=new Chart(e,t);e.setAttribute("data-labels",""),e.setAttribute("data-data",""),n.fillStyle="#fff",console.log(n)}const a=document.getElementById("h5vp_srt_convert_button");function c(e){for(var t="",n=e.split(/\n/);n.length>3;){for(var o=3;o<n.length;o++)n[2]+="\n"+n[o];n.splice(3,n.length-3)}var a=0;if(!n[0].match(/\d+:\d+:\d+/)&&n[1].match(/\d+:\d+:\d+/)&&(t+=n[0].match(/\w+/)+"\n",a+=1),!n[a].match(/\d+:\d+:\d+/))return"";var c=n[a].match(/(\d+):(\d+):(\d+)(?:,?\.?(\d+))?\s*-?-?>?,?\s*(\d+):(\d+):(\d+)(?:,?\.?(\d+))?/);return c?(t+=c[1]+":"+c[2]+":"+c[3]+"."+c[4]+" --\x3e "+c[5]+":"+c[6]+":"+c[7]+"."+c[8]+"\n",n[a+=1]&&(t+=n[a],n[a+1]?(t+="\n",t+=n[a+1]+"\n\n"):t+="\n\n"),t):""}a&&(a.onclick=async e=>{e.preventDefault();const t=document.getElementById("h5vp_srt_file").value,n=await fetch(t),o=await n.blob();if(o){var a=new FileReader;a.readAsText(o,"UTF-8"),a.onload=function(e){const n=function(e){var t=e.replace(/\r+/g,""),n=(t=t.replace(/^\s+|\s+$/g,"")).split("\n\n"),o="";if(n.length>0){o+="WEBVTT\n\n";for(var a=0;a<n.length;a+=1)o+=c(n[a])}return o}(e.target.result);var o,a,r;o=t.substring(t.lastIndexOf("/")+1).split(".").slice(0,-1).join(".")+".vtt",a=n,(r=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),r.setAttribute("download",o),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),document.getElementById("h5vp_srt_file").value=""},a.onerror=function(e){}}});const r=document.querySelectorAll(".h5vp_export_button");Object.values(r).map((e=>{const t=e.dataset.id;e.addEventListener("click",(function(e){e.preventDefault(),o.ajax({url:h5vpAdmin?.ajaxUrl,data:{action:"h5vp_export_data",id:t,nonce:h5vpAdmin?.nonce},method:"POST",success:e=>{const n=window.URL.createObjectURL(new Blob([e],{type:"application/json"})),o=document.createElement("a");o.href=n,o.setAttribute("download",`video-player-${t}.json`),document.body.appendChild(o),o.click(),document.body.removeChild(o);try{console.log({result:JSON.parse(e)})}catch(t){console.log({result:e})}}})}))}));const i=document.querySelector(".h5vp_import_form"),s=i?.querySelector("form"),l=i?.querySelector(".close"),d=i?.querySelector(".h5vp-import-notice");l?.addEventListener("click",(function(){i.style.display="none"})),s?.addEventListener("submit",(function(e){e.preventDefault();const t=s.querySelector(".h5vp_import_file");if(t.files[0]){var n=new FileReader;n.readAsText(t.files[0],"UTF-8"),n.onload=function(e){const n=e.target.result;o.ajax({url:h5vpAdmin?.ajaxUrl,data:{action:"h5vp_import_data",id,content:n},method:"POST",success:e=>{console.log({result:e}),d.style.display="block",t.value="",setTimeout((()=>{window.importReload&&window.location.reload(),i.style.display="none"}),1e3)}})},n.onerror=function(){console.log("error importing")}}}));const p=document.querySelectorAll(".h5vp_import_button");Object.values(p).map((e=>{e.addEventListener("click",(function(t){t.preventDefault(),window.id=e.dataset.id,window.importReload=e.dataset.reload,d.style.display="none",i.style.display="block"}))}))}))})();
//# sourceMappingURL=admin.js.map