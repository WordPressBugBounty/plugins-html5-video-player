(()=>{"use strict";var t;(t=jQuery)(document).ready((function(){t(".h5vp_import_data").on("click",(function(e){e.preventDefault(),t.ajax({url:h5vpAdmin?.ajaxUrl,data:{action:"h5vp_import_data_ajax"},success:t=>{const e=JSON.parse(t);!0===e?.success&&(location.href=location.href+"?h5vp-import=success")}})})),t(".h5vp_player_type .csf-fieldset .csf--button-group .csf--button").on("click",(function(){setTimeout((()=>{t(".h5vp_player_type_controls").addClass("h5vp_player_controls_click_trigger newclassbro"),t(".h5vp_player_controls_click_trigger").removeClass("h5vp_player_type_controls");const e=t(this).parent(".csf--button-group").find(".csf--active input").val();t('.h5vp_player_controls_click_trigger .csf-fieldset .csf--button-group .csf--button input[value="'+e+'"]').parent().trigger("click"),t(".h5vp_player_controls_click_trigger").removeClass("h5vp_player_controls_click_trigger")}),100),setTimeout((()=>{t(".newclassbro").addClass("h5vp_player_type_controls")}),1e3)})),t(".h5vp_player_type_controls .csf-fieldset .csf--button-group .csf--button").on("click",(function(){setTimeout((()=>{t(".h5vp_player_type").addClass("h5vp_player_click_trigger"),t(".h5vp_player_controls_click_trigger").removeClass("h5vp_player_type");const e=t(this).parent(".csf--button-group").find(".csf--active input").val();t('.h5vp_player_click_trigger .csf-fieldset .csf--button-group .csf--button input[value="'+e+'"]').parent().trigger("click"),t(".h5vp_player_click_trigger").removeClass("h5vp_player_click_trigger")}),100),setTimeout((()=>{t(".h5vp_player_click_trigger").addClass("h5vp_player_type")}),1e3)})),t(".h5vp_duplicate_player").on("click",(function(e){e.preventDefault(),t.post(h5vpAdmin.ajaxUrl,{action:"h5vp_dulicate_player",postid:t(this).data("postid"),security:t(this).attr("security")},(function(t){if(t){let t=window.location.href;t.split("?").length>1?t+="&duplicate=success":t+="?duplicate=success",window.location.href=t}}))})),"-1"!=window.location.href.search("duplicate=success")&&window.history.pushState({urlPath:"edit.php?post_type=videoplayer"},"","edit.php?post_type=videoplayer"),t(document).on("click",".h5vp_front_shortcode input",(function(e){e.preventDefault();let o=t(this).parent().find("input")[0];o.select(),o.setSelectionRange(0,30),document.execCommand("copy"),t(this).parent().find(".htooltip").text("Copied Successfully!")})),t(document).on("mouseout",".h5vp_front_shortcode input",(function(){t(this).parent().find(".htooltip").text("Copy To Clipboard")})),t(".h5vp_show_password").on("click",(function(){"password"==t(this).parent().find("input").attr("type")?t(this).parent().find("input").attr("type","text"):t(this).parent().find("input").attr("type","password")})),t(".h5vp-analytics table tr").on("click",(function(){this.getAttribute("to")&&(location.href=location.href.match(/(.+)&page=analytics/g)[0]+`&${this.getAttribute("to")}`)}));const e=document.getElementById("myChart"),o={type:"line",data:{labels:e&&e.getAttribute("data-labels")&&JSON.parse(e.getAttribute("data-labels")),datasets:[{label:"Views",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",color:"rgb(255, 99, 132)",data:e&&e.getAttribute("data-data")&&JSON.parse(e.getAttribute("data-data")),tension:.4}]},options:{},plugins:[{id:e&&e.getAttribute("id"),beforeDraw:t=>{const e=t.canvas.getContext("2d");e.save(),e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,t.width,t.height),e.restore()}}]};if(e){var n=new Chart(e,o);e.setAttribute("data-labels",""),e.setAttribute("data-data",""),n.fillStyle="#fff",console.log(n)}const a=document.getElementById("h5vp_srt_convert_button");function r(t){for(var e="",o=t.split(/\n/);o.length>3;){for(var n=3;n<o.length;n++)o[2]+="\n"+o[n];o.splice(3,o.length-3)}var a=0;if(!o[0].match(/\d+:\d+:\d+/)&&o[1].match(/\d+:\d+:\d+/)&&(e+=o[0].match(/\w+/)+"\n",a+=1),!o[a].match(/\d+:\d+:\d+/))return"";var r=o[a].match(/(\d+):(\d+):(\d+)(?:,?\.?(\d+))?\s*-?-?>?,?\s*(\d+):(\d+):(\d+)(?:,?\.?(\d+))?/);return r?(e+=r[1]+":"+r[2]+":"+r[3]+"."+r[4]+" --\x3e "+r[5]+":"+r[6]+":"+r[7]+"."+r[8]+"\n",o[a+=1]&&(e+=o[a],o[a+1]?(e+="\n",e+=o[a+1]+"\n\n"):e+="\n\n"),e):""}a&&(a.onclick=async t=>{t.preventDefault();const e=document.getElementById("h5vp_srt_file").value,o=await fetch(e),n=await o.blob();if(n){var a=new FileReader;a.readAsText(n,"UTF-8"),a.onload=function(t){const o=function(t){var e=t.replace(/\r+/g,""),o=(e=e.replace(/^\s+|\s+$/g,"")).split("\n\n"),n="";if(o.length>0){n+="WEBVTT\n\n";for(var a=0;a<o.length;a+=1)n+=r(o[a])}return n}(t.target.result);var n,a,i;n=e.substring(e.lastIndexOf("/")+1).split(".").slice(0,-1).join(".")+".vtt",a=o,(i=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),i.setAttribute("download",n),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),document.getElementById("h5vp_srt_file").value=""},a.onerror=function(t){}}});const i=document.querySelectorAll(".h5vp_export_button");Object.values(i).map((e=>{const o=e.dataset.id;e.addEventListener("click",(function(e){e.preventDefault(),t.ajax({url:h5vpAdmin?.ajaxUrl,data:{action:"h5vp_export_data",id:o,nonce:h5vpAdmin?.nonce},method:"POST",success:t=>{const e=window.URL.createObjectURL(new Blob([t],{type:"application/json"})),n=document.createElement("a");n.href=e,n.setAttribute("download",`video-player-${o}.json`),document.body.appendChild(n),n.click(),document.body.removeChild(n)}})}))}));const c=document.querySelector(".h5vp_import_form"),l=c?.querySelector("form"),s=c?.querySelector(".close"),p=c?.querySelector(".h5vp-import-notice");s?.addEventListener("click",(function(){c.style.display="none"})),l?.addEventListener("submit",(function(e){e.preventDefault();const o=l.querySelector(".h5vp_import_file");if(o.files[0]){var n=new FileReader;n.readAsText(o.files[0],"UTF-8"),n.onload=function(e){const n=e.target.result;t.ajax({url:h5vpAdmin?.ajaxUrl,data:{action:"h5vp_import_data",id,content:n},method:"POST",success:t=>{p.style.display="block",o.value="",setTimeout((()=>{window.importReload&&window.location.reload(),c.style.display="none"}),1e3)}})},n.onerror=function(){console.log("error importing")}}}));const d=document.querySelectorAll(".h5vp_import_button");Object.values(d).map((t=>{t.addEventListener("click",(function(e){e.preventDefault(),window.id=t.dataset.id,window.importReload=t.dataset.reload,p.style.display="none",c.style.display="block"}))}))})),document.addEventListener("DOMContentLoaded",(()=>{setTimeout((()=>{document.querySelectorAll(".h5vp_aws_notice .notice-dismiss").forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();const o=t.closest(".h5vp_aws_notice"),n={nonce:o.dataset.nonce};window.wp.ajax&&wp.ajax.post("h5vp_dismiss_aws_notice",n).then((t=>{o.remove()}))}))}))}),100)}))})();