(()=>{"use strict";const e=window.React,t=(window.ReactDOM,(t,s={},r=!1)=>{const[n,i]=(0,e.useState)(!r),[a,o]=(0,e.useState)(!1),[l,c]=(0,e.useState)(null),[p,d]=(0,e.useState)(null);if(!wp.ajax)return void console.error("Please use wp-util as a dependency");const u=(e={})=>{i(!0),o(!1),c(null),wp.ajax.post(t,{...s,...e}).done(e=>{d(e),i(!1)}).fail(e=>{o(!0),c(e),i(!1)})},h=async(e={})=>{u(e)};return(0,e.useEffect)(()=>{r||u(s)},[]),{data:p,saveData:h,refetch:h,isLoading:n,isError:a,error:l}}),s=function(e){return!!e&&(/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})(?:[?&][^\s]*)?$/.test(e)?e:!!/^[a-zA-Z0-9_-]{11}$/.test(e)&&`https://www.youtube.com/watch?v=${e}`)};var r=Symbol.for("immer-nothing"),n=Symbol.for("immer-draftable"),i=Symbol.for("immer-state");function a(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var o=Object.getPrototypeOf;function l(e){return!!e&&!!e[i]}function c(e){return!!e&&(d(e)||Array.isArray(e)||!!e[n]||!!e.constructor?.[n]||f(e)||_(e))}var p=Object.prototype.constructor.toString();function d(e){if(!e||"object"!=typeof e)return!1;const t=o(e);if(null===t)return!0;const s=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return s===Object||"function"==typeof s&&Function.toString.call(s)===p}function u(e,t){0===h(e)?Reflect.ownKeys(e).forEach(s=>{t(s,e[s],e)}):e.forEach((s,r)=>t(r,s,e))}function h(e){const t=e[i];return t?t.type_:Array.isArray(e)?1:f(e)?2:_(e)?3:0}function m(e,t){return 2===h(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function y(e,t,s){const r=h(e);2===r?e.set(t,s):3===r?e.add(s):e[t]=s}function f(e){return e instanceof Map}function _(e){return e instanceof Set}function v(e){return e.copy_||e.base_}function w(e,t){if(f(e))return new Map(e);if(_(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=d(e);if(!0===t||"class_only"===t&&!s){const t=Object.getOwnPropertyDescriptors(e);delete t[i];let s=Reflect.ownKeys(t);for(let r=0;r<s.length;r++){const n=s[r],i=t[n];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[n]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[n]})}return Object.create(o(e),t)}{const t=o(e);if(null!==t&&s)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function b(e,t=!1){return E(e)||l(e)||!c(e)||(h(e)>1&&(e.set=e.add=e.clear=e.delete=g),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>b(t,!0))),e}function g(){a(2)}function E(e){return Object.isFrozen(e)}var S,k={};function P(e){const t=k[e];return t||a(0),t}function T(){return S}function I(e,t){t&&(P("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function L(e){N(e),e.drafts_.forEach(A),e.drafts_=null}function N(e){e===S&&(S=e.parent_)}function C(e){return S={drafts_:[],parent_:S,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function A(e){const t=e[i];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function M(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];return void 0!==e&&e!==s?(s[i].modified_&&(L(t),a(4)),c(e)&&(e=z(t,e),t.parent_||$(t,e)),t.patches_&&P("Patches").generateReplacementPatches_(s[i].base_,e,t.patches_,t.inversePatches_)):e=z(t,s,[]),L(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==r?e:void 0}function z(e,t,s){if(E(t))return t;const r=t[i];if(!r)return u(t,(n,i)=>x(e,r,t,n,i,s)),t;if(r.scope_!==e)return t;if(!r.modified_)return $(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let n=t,i=!1;3===r.type_&&(n=new Set(t),t.clear(),i=!0),u(n,(n,a)=>x(e,r,t,n,a,s,i)),$(e,t,!1),s&&e.patches_&&P("Patches").generatePatches_(r,s,e.patches_,e.inversePatches_)}return r.copy_}function x(e,t,s,r,n,i,a){if(l(n)){const a=z(e,n,i&&t&&3!==t.type_&&!m(t.assigned_,r)?i.concat(r):void 0);if(y(s,r,a),!l(a))return;e.canAutoFreeze_=!1}else a&&s.add(n);if(c(n)&&!E(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;z(e,n),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(s,r)||$(e,n)}}function $(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&b(t,s)}var q={get(e,t){if(t===i)return e;const s=v(e);if(!m(s,t))return function(e,t,s){const r=F(t,s);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,s,t);const r=s[t];return e.finalized_||!c(r)?r:r===j(e.base_,t)?(W(e),e.copy_[t]=H(r,e)):r},has:(e,t)=>t in v(e),ownKeys:e=>Reflect.ownKeys(v(e)),set(e,t,s){const r=F(v(e),t);if(r?.set)return r.set.call(e.draft_,s),!0;if(!e.modified_){const r=j(v(e),t),o=r?.[i];if(o&&o.base_===s)return e.copy_[t]=s,e.assigned_[t]=!1,!0;if(((n=s)===(a=r)?0!==n||1/n==1/a:n!=n&&a!=a)&&(void 0!==s||m(e.base_,t)))return!0;W(e),B(e)}var n,a;return e.copy_[t]===s&&(void 0!==s||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==j(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,W(e),B(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const s=v(e),r=Reflect.getOwnPropertyDescriptor(s,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:s[t]}:r},defineProperty(){a(11)},getPrototypeOf:e=>o(e.base_),setPrototypeOf(){a(12)}},O={};function j(e,t){const s=e[i];return(s?v(s):e)[t]}function F(e,t){if(!(t in e))return;let s=o(e);for(;s;){const e=Object.getOwnPropertyDescriptor(s,t);if(e)return e;s=o(s)}}function B(e){e.modified_||(e.modified_=!0,e.parent_&&B(e.parent_))}function W(e){e.copy_||(e.copy_=w(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function H(e,t){const s=f(e)?P("MapSet").proxyMap_(e,t):_(e)?P("MapSet").proxySet_(e,t):function(e,t){const s=Array.isArray(e),r={type_:s?1:0,scope_:t?t.scope_:T(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=r,i=q;s&&(n=[r],i=O);const{revoke:a,proxy:o}=Proxy.revocable(n,i);return r.draft_=o,r.revoke_=a,o}(e,t);return(t?t.scope_:T()).drafts_.push(s),s}function V(e){if(!c(e)||E(e))return e;const t=e[i];let s;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=w(e,t.scope_.immer_.useStrictShallowCopy_)}else s=w(e,!0);return u(s,(e,t)=>{y(s,e,V(t))}),t&&(t.finalized_=!1),s}u(q,(e,t)=>{O[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),O.deleteProperty=function(e,t){return O.set.call(this,e,t,void 0)},O.set=function(e,t,s){return q.set.call(this,e[0],t,s,e[0])};var D=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,s)=>{if("function"==typeof e&&"function"!=typeof t){const s=t;t=e;const r=this;return function(e=s,...n){return r.produce(e,e=>t.call(this,e,...n))}}let n;if("function"!=typeof t&&a(6),void 0!==s&&"function"!=typeof s&&a(7),c(e)){const r=C(this),i=H(e,void 0);let a=!0;try{n=t(i),a=!1}finally{a?L(r):N(r)}return I(r,s),M(n,r)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===r&&(n=void 0),this.autoFreeze_&&b(n,!0),s){const t=[],r=[];P("Patches").generateReplacementPatches_(e,n,t,r),s(t,r)}return n}a(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...s)=>this.produceWithPatches(t,t=>e(t,...s));let s,r;return[this.produce(e,t,(e,t)=>{s=e,r=t}),s,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;c(e)||a(8),l(e)&&(l(t=e)||a(10),e=V(t));const s=C(this),r=H(e,void 0);return r[i].isManual_=!0,N(s),r}finishDraft(e,t){const s=e&&e[i];s&&s.isManual_||a(9);const{scope_:r}=s;return I(r,t),M(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let s;for(s=t.length-1;s>=0;s--){const r=t[s];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}s>-1&&(t=t.slice(s+1));const r=P("Patches").applyPatches_;return l(e)?r(e,t):this.produce(e,e=>r(e,t))}},R=D.produce;D.produceWithPatches.bind(D),D.setAutoFreeze.bind(D),D.setUseStrictShallowCopy.bind(D),D.applyPatches.bind(D),D.createDraft.bind(D),D.finishDraft.bind(D);var U=class{constructor(){this.callbacks={}}addEventListener(e,t){"function"==typeof t&&(void 0===this.callbacks[e]&&(this.callbacks[e]=[void 0]),this.callbacks[e].push(t))}on(e,t){this.addEventListener(e,t)}dispatchEvent(e,t){if(void 0===this.callbacks[e])return;let s=new U.Event;s.type=e,s.target=this,s.data=t,this.callbacks[e].forEach(e=>{"function"==typeof e&&e(s)})}},Y=U;Y.Event=class{constructor(){this.type="",this.target={},this.data={}}};class X{constructor(e,t){if(!(e&&e instanceof HTMLVideoElement))throw new Error("Html5VideoAnalyticsTracker: video must be an HTMLVideoElement");this.video=e,this.config={flushEveryMs:1e4,maxQueue:10,pageUrl:window.location.href,postId:null,userId:null,...t},this.progressMax=0,this.queue=[],this.milestonesFired=new Set,this.lastTime=0,this.isPlaying=!1,this.watchTimer=null,this.flushTimer=null,this.instanceId=this._getOrCreateInstanceId(e),this._onPlay=this._onPlay.bind(this),this._onPause=this._onPause.bind(this),this._onEnded=this._onEnded.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._onBeforeUnload=this._onBeforeUnload.bind(this)}start(){this._enqueue("impression",{}),this.video.addEventListener("play",this._onPlay),this.video.addEventListener("pause",this._onPause),this.video.addEventListener("ended",this._onEnded),this.video.addEventListener("timeupdate",this._onTimeUpdate),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("beforeunload",this._onBeforeUnload),this.flushTimer=window.setInterval(()=>this.flush(),this.config.flushEveryMs)}stop(){this._stopWatchTimer(),this.flushTimer&&window.clearInterval(this.flushTimer),this.video.removeEventListener("play",this._onPlay),this.video.removeEventListener("pause",this._onPause),this.video.removeEventListener("ended",this._onEnded),this.video.removeEventListener("timeupdate",this._onTimeUpdate),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("beforeunload",this._onBeforeUnload),this.flush(!0)}_onPlay(){this.isPlaying=!0,this.lastTime=this.video.currentTime||0,this._enqueue("play",{}),this._startWatchTimer()}_onPause(){this.isPlaying=!1,this._enqueue("pause",{}),this._stopWatchTimer(),this.flush()}_onEnded(){this.isPlaying=!1,this._updateProgressMax(100),this._enqueue("ended",{completed:1}),this._stopWatchTimer(),this.flush(!0)}_onTimeUpdate(){const e=this.video.duration;if(!e||!isFinite(e)||e<=0)return;const t=Math.floor(this.video.currentTime/e*100),s=[10,25,50,75,90];for(const e of s)t>=e&&!this.milestonesFired.has(e)&&(this.milestonesFired.add(e),this._updateProgressMax(e),this._enqueue("milestone",{milestone:e}))}_updateProgressMax(e){const t=Number(e);Number.isFinite(t)&&t>this.progressMax&&(this.progressMax=t)}_startWatchTimer(){this.watchTimer||(this.watchTimer=window.setInterval(()=>{if(!this.isPlaying)return;const e=this.video.currentTime||0,t=Math.max(0,Math.min(5,e-this.lastTime));this.lastTime=e,t>.25&&this._enqueue("watch_delta",{seconds:t}),this.queue.length>=this.config.maxQueue&&this.flush()},1e3))}_stopWatchTimer(){this.watchTimer&&(window.clearInterval(this.watchTimer),this.watchTimer=null)}_onVisibilityChange(){"hidden"===document.visibilityState?(this.isPlaying=!1,this._stopWatchTimer(),this.flush(!0)):(this.isPlaying=!this.video.paused,this._startWatchTimer(),this.flush(!1))}_onBeforeUnload(){this.flush(!0)}_enqueue(e,t){const s={event:e,ts:Date.now(),video_id:Number(this.config.videoId),post_id:this.config.postId?Number(this.config.postId):null,user_id:this.config.userId?Number(this.config.userId):null,page_url:this.config.pageUrl,instance_id:this.instanceId,session_id:this._h5vpGetSessionId(),progress_max:this.progressMax,current_time:this._safeNumber(this.video.currentTime),duration:this._safeNumber(this.video.duration),meta:t||{}};this.queue.push(s)}async flush(e=!1){if(!this.queue.length)return;const t={events:this.queue.splice(0,this.queue.length)};window.H5VP_ANALYTICS?.token&&(t.token=window.H5VP_ANALYTICS.token);const s=JSON.stringify(t);if(e&&navigator.sendBeacon)try{const e=new Blob([s],{type:"application/json"});if(navigator.sendBeacon(this.config.endpoint,e))return}catch(e){}const r={"Content-Type":"application/json","X-WP-Nonce":this.config.nonce};try{await fetch(this.config.endpoint,{method:"POST",headers:r,credentials:"same-origin",body:s,keepalive:e})}catch(e){}}_safeNumber(e){return"number"!=typeof e||!isFinite(e)||e<0?null:e}_getOrCreateInstanceId(e){if(e.dataset.h5vpInstanceId)return e.dataset.h5vpInstanceId;const t="h5vp_"+Math.random().toString(16).slice(2)+"_"+Date.now().toString(16);return e.dataset.h5vpInstanceId=t,t}_h5vpGetSessionId(){const e="h5vp_session_id",t="h5vp_session_last_ts",s=Date.now(),r=Number(localStorage.getItem(t)||0);let n=localStorage.getItem(e);return(!n||!r||s-r>18e5)&&(n="sess_"+Math.random().toString(16).slice(2)+"_"+s.toString(16),localStorage.setItem(e,n)),localStorage.setItem(t,String(s)),n}}const J=class extends Y{constructor(e,t,{features:s,isBackend:r,isPremium:n,provider:i}){super(),this.media=e,this.poster=null,this.initialized=!1,this.streamLoaded=!1,this.isPremium=n,this.isBackend=r,this.features=s,this.container=this.media.closest(".wp-block-html5-player-video"),this.iconUrl=window.h5vpBlock?.plugin_url?window.h5vpBlock.plugin_url+"img/plyr.svg":"",this.onEvents=[],this.provider=i,this.options=R(t,e=>{e.markers&&(e.markers.enabled=!0),t.speed&&(e.speed.options=t.speed.options.map(e=>parseFloat(e))),t.speed?.options?.[0]||(e.speed={options:[.5,.75,1,1.25,1.5,1.75,2]}),e.fullscreen={container:".plyr_wrapper",iosNative:!0},e.autoplay=!(this.features.playWhenVisible||!this.isBackend)&&t.autoplay,e.ratio=t.ratio?.includes(":")?t.ratio:null,this.features.passwordProtected?.enabled&&!t.ratio?.includes(":")&&(e.ratio="16:9"),this.iconUrl&&(e.iconUrl=this.iconUrl)}),this.local=window.h5vpBlock||{},t.urls?.enabled||(this.options=R(this.options,e=>{e.urls={download:null}})),this.media.closest(".plyr_wrapper")?.offsetWidth<=425&&(this.options=R(this.options,e=>{e.controls=this.options.controls.filter(e=>!["fast-forward","restart","rewind"].includes(e))})),this.options.muted?this.options=R(this.options,e=>{e.volume=0,e.storage.enabled=!1}):this.options=R(this.options,e=>{e.volume=.5,e.storage={enabled:!0}}),"undefined"==typeof Plyr&&(console.error("Plyr is not defined. Please make sure Plyr library is loaded."),this.media.setAttribute("controls",!0)),setTimeout(()=>{"m3u8"===this.media.src?.split(".").pop()?(this.player=new Plyr(this.media,{...this.options,playsinline:!0,i18n:window.h5vpI18n||{}}),this.videoHls(),this.player.on("ready",()=>this.onReady())):"mpd"===this.media.src?.split(".").pop()?this.videoDash():this.features.passwordProtected?.enabled||"none"===this.options.preload?(this.player=new Plyr(this.media,{...this.options,playsinline:!0,i18n:window.h5vpI18n||{}}),this.player.on("ready",()=>this.onReady()),this.player.on("loadedmetadata",()=>{this.initialized||this.features.passwordProtected?.enabled||(this.init(),this.player.play())})):(this.player=new Plyr(this.media,{...this.options,i18n:window.h5vpI18n||{}}),this.player.on("ready",()=>this.onReady()),this.init()),this.saveState(),this.player?.on("pause",()=>{!this.features.disablePause||this.isBackend||this.features.popup?.enabled||this.player.play()}),window.instance||(window.instance=[]),window.instance.push(this.player),this.player?.on("play",()=>{setTimeout(()=>{const e=this.player?.elements?.inputs?.seek;e&&e.value<=0&&this.player.on("timeupdate",()=>{const t=100/this.player.duration*this.player.currentTime;e&&(e.setAttribute("style",`--value:${t}%`),e.value=t)})},3e3)}),this.player?.elements?.buttons?.mute?.addEventListener("click",()=>{0===this.player.volume&&(this.player.volume=.4)}),this.addEventListener("update-source",({data:e})=>{this.setSource(e.source,e.qualities,e.captions)}),this.player?.on("ready",()=>{this.poster&&this.player.elements?.poster&&setTimeout(()=>{this.player.elements.poster.style.cssText=`background-image:url(${this.poster});`},500)})},500)}onReady(){const e=this.player?.elements?.wrapper?.closest(".wp-block-html5-player-video");if(e&&(e.style.aspectRatio=""),this.onEvents.length>0&&(this.onEvents.forEach(e=>{this.player.on(e.eventName,e.callback)}),this.onEvents=[]),this.player?.elements?.container?.addEventListener("keydown",e=>{" "===e.key&&(e.preventDefault(),this.player.playing?this.player.pause():this.player.play())}),window.location.host.includes("dvrg")&&window.document.addEventListener("keydown",e=>{" "===e.key&&(this.player.playing?this.player.pause():this.player.play())}),this.features.customPlayButtonSelector){const e=document.querySelector(this.features.customPlayButtonSelector);e&&e.addEventListener("click",()=>{this.player.play()})}window.H5VP_ANALYTICS&&(window.initializedH5VPAnalytics||(window.initializedH5VPAnalytics=!0,document.querySelectorAll(".wp-block-html5-player-video[data-video-id]").forEach(e=>{const t=Number(e.dataset.videoId);t&&(e=e.querySelector("video"))&&new X(e,{endpoint:window.H5VP_ANALYTICS.endpoint,nonce:window.H5VP_ANALYTICS.nonce,videoId:t,postId:window.H5VP_ANALYTICS.postId||null,userId:window.H5VP_ANALYTICS.userId||null}).start()})))}setIsPremium(e){this.isPremium=e}setSource(e=null,t=null){t=t||this.features.qualities;const s=t?.map(e=>({type:`video/${e?.video_file?.split(".").pop()}`,size:parseInt(e.size),src:e.video_file}))||[];(this.player.source||e)&&s.push({src:e||this.player.source,type:"video/mp4",size:720}),this.player.source={type:"video",title:"",sources:s,poster:this.player.poster&&"false"!==this.player.poster?this.player.poster:""};const r=this.features.captions?.map(e=>{if(e.caption_file){const t=e.label.split("/");return{kind:"captions",size:e.size,label:t[0],srclang:t[1],src:e.caption_file}}})||[];this.player.download=this.player.source,r?.map(e=>{if(e?.src){const t=document.createElement("track");Object.assign(t,e),this.player.media.appendChild(t)}}),"m3u8"===e?.split(".").pop()?this.videoHls():"mpd"===e?.split(".").pop()&&(this.media.src=e,this.videoDash(!0,e))}reInit(){this.init()}init(){if(!this.player)return void console.error("something went wrong!");this.initialized=!0;const e=this.features.qualities?.map(e=>({type:`video/${e?.video_file?.split(".").pop()}`,size:parseInt(e.size),src:e.video_file})).filter(e=>e.src)||[],t=this.features.captions?.map(e=>{const t=e.label.split("/");return{kind:"captions",size:e.size,label:t[0],srclang:t[1],src:e.caption_file}})||[];this.player.download=this.player.source,(this.media.src||this.player.source)&&e.push({src:this.media.src||this.player.source,type:"video/mp4",size:720}),this.player.source={type:"video",sources:e,poster:this.player.poster&&"false"!==this.player.poster?this.player.poster:""},t?.map(e=>{if(e?.src){const t=document.createElement("track");Object.assign(t,e),this.player.media.appendChild(t)}}),this.player.on("play",()=>{window.location.pathname.includes("/wp-admin")&&(this.player.pause(),this.player.currentTime=0)}),"object"==typeof this.features&&(this.makeElementSticky(this.features.sticky),this.createChapter(),this.watermark(this.features.watermark),this.thumbInPause(this.features?.thumbInPause),this.playWhenVisible(),this.pauseOther(),this.landScapeWhenFullscreen()),this.player.on("play",()=>{this.disabled&&(this.player.currentTime=0,this.player.pause())}),this.player.on("ready",()=>{this.media.plyr=this.player,this.features.startTime&&!this.features.saveState&&setTimeout(()=>{this.player.forward(parseInt(this.features.startTime)),["youtube","vimeo"].includes(this.provider)&&(this.player.muted=!0,this.player.play(),setTimeout(()=>{this.player.pause(),this.player.muted=!1},900))},200),this.options.autoplay&&!this.isBackend&&this.player?.play(),this.controlTouchAction();const e=this.player.elements?.progress?.offsetWidth;e<50&&!this.features.popup&&this.player.elements?.container?.classList?.add("h5vp_progressbar_up")})}setPoster(e){this.player?.elements?.poster&&e&&(this.player.elements.poster.style.backgroundImage=`url(${e})`)}playWhenVisible(){if(this.features.playWhenVisible){let e=!1;this.player.on("ready",()=>{window.addEventListener("scroll",()=>{if(!this.isPremium)return!1;this.player.elements?.container?.offsetParent?.offsetTop<window.scrollY&&!e&&(setTimeout(()=>{this.player.playing||(this.player.muted=!0,this.player.play())},1e3),this.player.play(),e=!0)})})}}makeElementSticky(e){if(!e?.enabled)return!1;const t=this.player.elements.fullscreen;if(t&&this.player){const s=t.getBoundingClientRect().top,r=function(e){let t=document.createElement("template");return t.innerHTML=e,t.content.firstChild}("<span class='close'>&times;</span>");window.addEventListener("scroll",()=>{if(!this.isPremium)return;const n=t.querySelector(".close");window.scrollY>=s&&this.player.playing?(t.classList.add(e.position),t.classList.add("sticky"),n||t.appendChild(r)):this.player.playing||(t.classList.remove("sticky"),t.classList.remove(e.position)),r.addEventListener("click",()=>{t.classList.remove(e.position),t.classList.remove("sticky"),this.player.pause()})})}}createChapter(){const e=this.player?.elements?.container,t=this.options.markers.points?.map(e=>({...e,time:this.chapterTimeToSeconds(e.time)}));if(!Array.isArray(t)||!e)return!1;const s=e.querySelector(".h5vp-chapter-wrapper");if(!t||s||!t.length)return!1;const r=document.createElement("div"),n=document.createElement("div"),i=document.createElement("button"),a=document.createElement("div");i.classList="h5vp-chapter-button plyr__controls__item plyr__control",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 487.3 487.3"> <path d="M487.2,69.7c0,12.9-10.5,23.4-23.4,23.4h-322c-12.9,0-23.4-10.5-23.4-23.4s10.5-23.4,23.4-23.4h322.1 C476.8,46.4,487.2,56.8,487.2,69.7z M463.9,162.3H141.8c-12.9,0-23.4,10.5-23.4,23.4s10.5,23.4,23.4,23.4h322.1 c12.9,0,23.4-10.5,23.4-23.4C487.2,172.8,476.8,162.3,463.9,162.3z M463.9,278.3H141.8c-12.9,0-23.4,10.5-23.4,23.4 s10.5,23.4,23.4,23.4h322.1c12.9,0,23.4-10.5,23.4-23.4C487.2,288.8,476.8,278.3,463.9,278.3z M463.9,394.3H141.8 c-12.9,0-23.4,10.5-23.4,23.4s10.5,23.4,23.4,23.4h322.1c12.9,0,23.4-10.5,23.4-23.4C487.2,404.8,476.8,394.3,463.9,394.3z M38.9,30.8C17.4,30.8,0,48.2,0,69.7s17.4,39,38.9,39s38.9-17.5,38.9-39S60.4,30.8,38.9,30.8z M38.9,146.8 C17.4,146.8,0,164.2,0,185.7s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9S60.4,146.8,38.9,146.8z M38.9,262.8 C17.4,262.8,0,280.2,0,301.7s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9S60.4,262.8,38.9,262.8z M38.9,378.7 C17.4,378.7,0,396.1,0,417.6s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9C77.8,396.2,60.4,378.7,38.9,378.7z"/> </svg><span class="plyr__tooltip">Chapter</span>',r.classList="h5vp-chapter-wrapper",n.classList="h5vp-chapter-list-wrapper",a.classList="h5vp-chapter-list",t.map(t=>{if(""!=(t?.label||t?.name)&&""!=t?.time){const s=this.chapterTimeToSeconds(t?.time),r=document.createElement("button");r.innerHTML=`<span>${t?.label}</span>`,a.appendChild(r),r.onclick=()=>{a.classList.remove("showing"),this.player.currentTime=s,this.player.play()},i.onclick=()=>{a.classList.contains("showing")?a.classList.remove("showing"):a.classList.add("showing")},e.addEventListener("click",function(e){a.contains(e.target)||i.contains(e.target)||a.classList.contains("showing")&&a.classList.remove("showing")}),this.onClick(e.querySelector(".plyr__controls__item.plyr__menu button"),function(){a.classList.contains("showing")&&a.classList.remove("showing")})}}),n?.appendChild(a),this.player.on("ready",()=>{const t=e.querySelector(".plyr__controls__item.plyr__volume"),s=e.querySelector(".plyr__controls__item.plyr__menu"),r=e.querySelector(".plyr__controls__item[data-plyr='fullscreen']"),a=e.querySelector(".plyr__controls__item.plyr__time--current.plyr__time");t?t.before(i):s?s.before(i):r?r.before(i):a&&a.before(i),e.querySelector(".plyr__controls")?.after(n)})}watermark(e={}){const{enabled:t,type:s,text:r,color:n}=e,i=this.player.elements?.container;if(!i||!t)return!1;let a=r;setTimeout(async()=>{if(["email","name"].includes(s))try{this.disabled=!0;const e=await wp.ajax.post("watermark_data",{nonce:this.nonce||window.h5vpBlock?.nonce});a=e.user[s]||window.location.origin,this.disabled=!1}catch{this.disabled=!1}let e="watermark";this.player.on("play",()=>{if(!this.isPremium)return!1;const t=setInterval(()=>{const t=document.querySelector(e);t&&i.removeChild(t),e="watermark"+Math.round(1e3*Math.random());const r=document.createElement(e);r.setAttribute("style","display: block !important"),"email"===s&&(r.innerText=a),i.appendChild(r),r.innerText=a,r.setAttribute("style",`position:absolute; display:block !important; opacity:1 !important;top: ${Math.round(90*Math.random())}% !important; left: ${Math.round(70*Math.random())}% !important; transform: none !important`),r.style.color=n,i.appendChild(r)},2e3);this.player.on("pause",()=>{setTimeout(()=>{clearInterval(t);const s=document.querySelector(e);s&&i.removeChild(s)},0)})})},100)}thumbInPause(){if(this.features?.thumbInPause?.enabled)if("custom"==this.features.thumbInPause?.type){const e=document.createElement("img"),t=this.player?.elements?.buttons?.play?.[0];this.player.on("ready",()=>{e.src=this.poster;const t=this.player?.elements?.buttons?.play?.[0];t&&(t.classList.add("thumbInPause"),this.poster&&t.appendChild(e))}),this.player.on("play",()=>{t?.classList.remove("thumbInPause")}),this.player.on("pause",()=>{t?.classList.add("thumbInPause")})}else this.player.on("pause",()=>{this.player?.elements?.container&&this.player?.elements?.container.classList.add("plyr--stopped")})}destroy(){this.player?.destroy()}chapterTimeToSeconds(e=""){const t=e.toString().match(/(\d+):(\d+)/);return null==t?parseInt(e):60*parseInt(t[1])+parseInt(t[2])}getTTT(e=10,t=10){return e/100*t-e/100*(100-t)}onClick(e,t){e&&e.addEventListener("click",t)}on(e,t){this.player?.ready?this.player?.on(e,t):this.onEvents.push({eventName:e,callback:t})}stop(){this.player?.stop()}setNonce(e){this.nonce=e}setVideoId(e){this.videoId=e}videoHls(){const e=()=>{if(window.Hls?.isSupported()){const e=new window.Hls;e.loadSource(this.player.media.src),this.player.on("ready",()=>{e.attachMedia(this.player.media)}),this.player.ready&&e.attachMedia(this.player.media),e.on(window.Hls.Events.MANIFEST_PARSED,()=>{["metadata","none"].includes(this.options.preload)&&setTimeout(()=>{e.stopLoad()},1e3),this.player.on("play",function(){e.startLoad()})}),this.player?.on("languagechange",()=>{setTimeout(()=>e.subtitleTrack=this.player.currentTrack,50)})}else console.warn("Hls does not support")};let t=document.getElementById("h5vp-hls-js");t?e():(t=document.createElement("script"),t.setAttribute("id","h5vp-hls-js"),t.src=this.local?.hls,document.getElementsByTagName("head")[0]?.prepend(t),t?.addEventListener("load",()=>e()))}videoDash(e=!1,t=null){let s=document.getElementById("h5vp-dash-js");if(s){if(dashjs){e&&(this.destroy(),this.media=this.container.querySelector("video"));const s=window.dashjs.MediaPlayer().create();s.initialize(this.media,e?t:this.media.src,!0),this.player=new Plyr(this.media,{...this.options,playsinline:!1,captions:{active:!0,update:!0}}),this.player.on("ready",()=>this.onReady()),window.player=this.player,window.dash=s}}else s=document.createElement("script"),s.setAttribute("id","h5vp-dash-js"),s.src=this.local?.dash,document.getElementsByTagName("head")[0]?.prepend(s),s.addEventListener("load",()=>{dashjs&&window.dashjs.MediaPlayer().create().initialize(this.player.media,this.player.media.src,!0)})}controlTouchAction(){if(document.body.offsetWidth>992)return!1;const e=this.player.elements?.container;if(!e)return!1;const t=this.player,s=e.querySelector(".plyr__video-wrapper"),r=document.createElement("span");r.classList.add("seekSecond"),s.appendChild(r),t.eventListeners.forEach(t=>{"dblclick"===t.type&&e.removeEventListener(t.type,t.callback,t.options)}),s.parentNode.addEventListener("dblclick",e=>{let t=e.target.getBoundingClientRect(),n=e.clientX-t.left;this.player.fullscreen.active&&(s.offsetWidth-150<n&&s.offsetWidth/2<n?(this.player.forward(this.options.seekTime),r.innerText=this.options.seekTime+" sec"):s.offsetWidth/2>n&&n<150&&(this.player.rewind(this.options.seekTime),r.innerText="-"+this.options.seekTime+" sec"),setTimeout(()=>{r.innerText=""},1e3)),n>150&&n<s.offsetWidth-150&&this.player.fullscreen.toggle()}),e.addEventListener("touchstart",e=>{this.player.fullscreen.active&&(this.touchClientX=e.touches[0].clientX,this.touchClientY=e.touches[0].clientY)},!1),e.addEventListener("touchend",e=>{if(!this.player.fullscreen.active)return;let s;s=e.changedTouches[0].clientX-this.touchClientX,s>5?(t.forward(parseInt(s)/10),r.innerText=parseInt(s/10)+" sec"):s<-5&&(t.rewind(Math.abs(s)/10),r.innerText=parseInt(s/10)+" sec"),setTimeout(()=>{r.innerText=""},1e3)},!1)}pauseOther(){if(location.pathname.includes("wp-admin"))return!1;window.hpublic?.pauseOther&&this.player.on("play",()=>{const e=this.player.elements.fullscreen?.dataset?.uniqueId;document.querySelectorAll(`video:not([data-unique-id="${e}"] video, a video)`).forEach(e=>e.pause())})}domAttributesToObjectList(e){const t=[];return e.forEach(e=>{const s=e.attributes,r={};for(let e=0;e<s.length;e++){const t=s[e];r[t.name]=t.value}t.push(r)}),t}getStoredSettings(){return JSON.parse(window.localStorage.getItem("plyr"))}landScapeWhenFullscreen(){window?.innerWidth<992&&(this.player.on("enterfullscreen",()=>{screen?.orientation?.lock("landscape")}),this.player.on("exitfullscreen",()=>{screen?.orientation?.lock("portrait")}))}saveState(){if(!this.player||!this.features.saveState)return;const e=`plyr:progress:${this.media.getAttribute("data-video-id")||function(e){if(e)try{const t=new URL(e).pathname.split("/").filter(e=>e.length>0).pop();if(!t)throw new Error("No valid name found in the URL path");let s=0;for(let e=0;e<t.length;e++)s=(s<<5)-s+t.charCodeAt(e),s|=0;return Math.abs(s).toString(36).substring(0,8)}catch(e){console.warn(e.message)}}(this.media.currentSrc||this.media.querySelector("source")?.src||"")||Math.random().toString(36).slice(2)}`,t=()=>{try{const t=JSON.parse(localStorage.getItem(e)||"0")||0,s=this.player.duration||0;t>10&&s>0&&t<s-5&&(this.player.currentTime=t)}catch(e){console.error(e)}};this.player?.on("ready",t),this.player?.on("loadedmetadata",t);const s=this.throttle(()=>{try{const t=Math.floor(this.player.currentTime||0);localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}},5e3);setTimeout(()=>{this.player.on("timeupdate",s),this.player.on("pause",s),this.player.on("seeking",s)},100),this.player.on("ended",()=>{try{localStorage.removeItem(e)}catch(e){console.error(e)}})}throttle(e,t){let s=0;return function(...r){const n=Date.now();n-s>=t&&(s=n,e.apply(this,r))}}},K=({enabled:t,items:s})=>t?(0,e.createElement)(e.Fragment,null,s.map((t,s)=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("style",null,`\n              .overlay_item_${s} p{\n                padding: 5px 12px;\n              }\n              .overlay_item_${s} p,\n              .overlay_item_${s} img,\n              .overlay_item_${s} a {\n              color: ${t.color};\n              font-size: ${t.fontSize};\n              background-color: ${t.backgroundColor};\n              border-radius: 3px px;\n              opacity: ${t.opacity}\n            }\n            .overlay_item_${s} a:hover,\n            .overlay_item_${s} p:hover {\n              color: ${t.hoverColor};\n            }\n            `.replace(/\s+/g," ")),(0,e.createElement)("div",{key:s,className:`h5vp_overlay ${t.position} overlay_item_${s}`},"text"===t.type?(0,e.createElement)("p",null,t.link?(0,e.createElement)("a",{href:t.link,rel:"noreferrer",target:"_blank"},t.text):(0,e.createElement)(e.Fragment,null,t.text)):t.link?(0,e.createElement)("a",{className:"background-transparent",href:t.link,rel:"noreferrer",target:"_blank"},(0,e.createElement)("img",{src:t.logo})):(0,e.createElement)("img",{src:t.logo}))))):(0,e.createElement)(e.Fragment,null),Q=({setOpen:t,popup:s,poster:r,isBackend:n})=>{const{align:i,enabled:a,hasBtn:o,selector:l,type:c,btnText:p,btnStyle:d,isTrigger:u}=s,{padding:h,...m}=d||{};return(0,e.useEffect)(()=>{"button"===c&&o&&l&&a&&document.querySelector([".","#","["].includes(l)?`${l}`:`.${l}`)?.addEventListener("click",()=>{t(!0)})},[]),a&&o&&n?(0,e.createElement)("div",{className:"flex justify-center h5vp_popup_opener_wrapper"},(0,e.createElement)("span",{className:"h5vp_popup_area_title"},"trigger"),"Used Existing Button"):a&&"button"===c&&!o&&u?(0,e.createElement)("div",{className:"button"===c?`flex justify-${i}`:""},(0,e.createElement)("span",{onClick:()=>t(!1),className:"close popup_close_button"},"×")):(0,e.createElement)(e.Fragment,null,a&&(0,e.createElement)("div",{className:("button"===c?`flex justify-${i}`:"")+" h5vp_popup_opener_wrapper"},n&&(0,e.createElement)("span",{className:"h5vp_popup_area_title"},"trigger"),"poster"===c?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(e.Fragment,null,r?(0,e.createElement)("div",{className:"popup_opener",onClick:()=>t(!0)},(0,e.createElement)("button",{type:"button",className:"plyr__control plyr__control--overlaid","data-plyr":"play","aria-pressed":"false","aria-label":"Play"},(0,e.createElement)("svg",{"aria-hidden":"true",focusable:"false",className:"popup_play"},(0,e.createElement)("use",{xlinkHref:`${window.h5vpBlock?.plugin_url}img/plyr.svg#plyr-play`})),(0,e.createElement)("span",{className:"plyr__sr-only"},"Play")),(0,e.createElement)("img",{src:r,width:"100%"})):(0,e.createElement)("div",{className:"h5vp_poster_missing"},(0,e.createElement)("h3",null,"Video Poster Missing"),(0,e.createElement)("p",null,"Please add a poster image to display as the popup opener, or select the “Button” popup opener type from the settings.")))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("button",{className:"popup_opener",onClick:()=>t(!0),style:{...m,padding:Object.values(h).join(" ")}},p)),(0,e.createElement)("span",{onClick:()=>t(!1),className:"close"},"×")))},Z=({poster:t,source:s,isPremium:r,className:n="",reference:i,...a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("video",{crossOrigin:!0,className:n,id:"player","data-poster":t||"",ref:i,src:s,...a,style:{width:"100%",maxWidth:"100%"}},r&&(0,e.createElement)(e.Fragment,null,!["m3u8","mpd"].includes(s?.split(".").pop())&&(0,e.createElement)(e.Fragment,null))),a["data-poster"]&&(0,e.createElement)("div",{className:"preload_poster",style:{background:`url(${a["data-poster"]})`}})),G=({source:t="https://www.youtube.com/watch?v=MLpWrANjFbI",className:s="",...r})=>(0,e.createElement)("div",{className:`plyr__video-embed player_youtube ${s}`,id:"player",...r},(0,e.createElement)("iframe",{src:t?`${t}?origin=${window.location.origin}&iv_load_policy=3&amp;modestbranding=1&amp;playsinline=1&amp;showinfo=0&amp;rel=0&amp;enablejsapi=1`:"",allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),r["data-poster"]&&(0,e.createElement)("div",{className:"preload_poster",style:{background:`url(${r["data-poster"]})`}})),ee=function(e){if(!e)return!1;const t=function(e){if(!e)return null;if(!isNaN(e))return e;const t=e.match(/^(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com\/(?:.*\/)?|player\.vimeo\.com\/video\/)(\d+)/);return t?t[1]:null}(String(e));return t?`https://player.vimeo.com/video/${t}`:isNaN(e)?void 0:`https://player.vimeo.com/video/${e}`},te=({endScreen:t,player:s})=>{const{enabled:r,text:n,btnText:i,btnLink:a}=t,o=(0,e.useRef)(null);return(0,e.useEffect)(()=>{s?.on("ended",()=>{r&&(s.stop(),o.current.style.display="block")})},[s]),(0,e.createElement)(e.Fragment,null,r&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{ref:o,className:"h5vp_end_screen"},(0,e.createElement)("span",{className:"close",onClick:()=>{o.current.style.display="none"}},"×"),(0,e.createElement)("div",{className:"content"},(0,e.createElement)("p",null,n),i&&(0,e.createElement)("a",{target:"_blank",rel:"noreferrer",href:a},i)))))},se=({styles:t={},uniqueId:s})=>{const[r,n]=(0,e.useState)(null);return(0,e.useEffect)(()=>{let e="";"object"==typeof t&&Object.keys(t).map(r=>{if("object"==typeof t[r]){let n="";Object.keys(t[r]).map(e=>{var s;n+=`${s=e,s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}: ${t[r][e]};`}),e+=`#${s} ${[".","#"].includes(r[0])?"":"."}${r}{${n}} `}}),e+=`#${s} {--plyr-color-main: ${window.h5vpBlock?.brandColor}}`,n(e)},[t,s]),(0,e.createElement)("style",{dangerouslySetInnerHTML:{__html:r}})},re=({source:t="https://player.vimeo.com/video/76979871",className:s="",...r})=>(0,e.createElement)("div",{className:`plyr__video-embed player_vimeo ${s}`,id:"player",...r},(0,e.createElement)("iframe",{src:t?`${t}?loop=false&amp;byline=false&amp;portrait=false&amp;title=false&amp;speed=true&amp;transparent=0&amp;gesture=media`:"",allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),r["data-poster"]&&(0,e.createElement)("div",{className:"preload_poster",style:{background:`url(${r["data-poster"]})`}})),ne=function(e){let t="";for(let s=0;s<e;s++){const e=Math.floor(52*Math.random());t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(e)}return t},ie=({height:t="10px",width:s="10px",color:r="#3498db",className:n="",style:i={}})=>(0,e.createElement)("div",{className:`simple-loader ${n}`,style:{height:t,width:s,borderTopColor:r,...i}}),ae=({passwordProtected:s,setSrc:r,nonce:n,src:i,setQualities:a})=>{const{enabled:o,heading:l,button:c,key:p,errorMessage:d}=s,{data:u,refetch:h,isLoading:m}=t("h5vp_ajax_handler",{nonce:n,method:"check_password",model:"Video",key:p},!0),[y,f]=(0,e.useState)(null),[_,v]=(0,e.useState)(null),{text:w="Access"}=c||{};return(0,e.useEffect)(()=>{f(null),m||(u?.source?(r(u.source),a(u.quality)):null!==u&&f(d||"Password didn't matched"))},[m]),(0,e.createElement)(e.Fragment,null,o&&!i&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"password_form_overlay"}),(0,e.createElement)("div",{className:"password_form"},(0,e.createElement)("form",{onSubmit:e=>{e.preventDefault(),h({key:p,password:_})}},l&&(0,e.createElement)("h3",{className:"password_form_heading"},l),(0,e.createElement)("input",{type:"password",className:"password_form_input",placeholder:"Password",onChange:e=>v(e.target.value)}),(0,e.createElement)("button",{className:"password_form_button",disabled:m},m&&(0,e.createElement)(ie,{style:{borderWidth:"2px"}})," ",w),y&&(0,e.createElement)("p",{className:"password_form_error"},y)))))},oe=function(e,t){try{const s=atob(e);let r="";for(let e=0;e<s.length;e++)r+=String.fromCharCode(s.charCodeAt(e)^t.charCodeAt(e%t.length));return r}catch{return e}},le=({attributes:r,nonce:n=window.h5vpBlock?.nonce,isBackend:i=!1,clientId:a=null})=>{const{additionalCSS:o,additionalID:l,source:c,poster:p,provider:d,qualities:u,quality:h,subtitle:m,options:y,features:f,uniqueId:_,styles:v}=r,{popup:w,overlay:b,endScreen:g,passwordProtected:E={},hideYoutubeUI:S}=f,[k,P]=(0,e.useState)(E.enabled?"":d?c:oe(c,_)),[T,I]=(0,e.useState)(!1),[L,N]=(0,e.useState)("library"===d?"self-hosted":d),{autoplay:C,muted:A,loop:M}=y,{data:z,isLoading:x}=t("pipe_handler",{nonce:n}),{data:$}=t("h5vp_ajax_handler",{nonce:n,src:k,method:"get_id_response",model:"Video"}),[q,O]=(0,e.useState)(u||h),j=(0,e.useRef)(null),F=(0,e.useRef)(null);return(0,e.useEffect)(()=>{T?F.current?.player.play():F.current?.player.pause()},[T]),(0,e.useEffect)(()=>{j.media=j.current?.querySelector("#player")},[j]),(0,e.useEffect)(()=>{const e=j.current?.querySelector("#player");return e&&(F.current=new J(e,y,{features:f,qualities:q,captions:m,isBackend:i,isPremium:z,provider:d}),F.current.poster=p),()=>{F.current?.destroy()}},[y,f,m]),(0,e.useEffect)(()=>{F.current&&!F.current?.nonce&&F.current.setNonce(n),F.current&&!F.current?.videoId&&F.current.setVideoId($)},[n,$,F.current]),(0,e.useEffect)(()=>{F.current&&F.current.setIsPremium(z),x||z||"self-hosted"===L||F.current?.destroy()},[z,x,L,F.current]),(0,e.useEffect)(()=>{L||(s(c)?N("youtube"):ee(c)?N("vimeo"):N("self-hosted"))},[c]),(0,e.useEffect)(()=>{F.current?.player&&p&&F.current.setPoster(p)},[p]),(0,e.useEffect)(()=>{setTimeout(()=>{F.current?.player&&E.enabled&&(F.current.setSource(k,q),F.current.player.play())},100)},[k]),(0,e.useEffect)(()=>{window.sources?window.sources.push(c):window.sources=[c]},[k,c]),(0,e.useEffect)(()=>{P(E.enabled?"":d?c:oe(c,_))},[c]),c?(0,e.createElement)("div",{ref:j,id:_,className:`h5vp_player_temp  ${w.enabled?"h5vp_popup_enabled":""} ${T?"h5vp_popup_open":""}`},(0,e.createElement)(se,{styles:v,uniqueId:_}),(0,e.createElement)("style",null,o),z&&(0,e.createElement)(Q,{setOpen:I,popup:w,poster:p,isBackend:i,clientId:a,uniqueId:_}),(0,e.createElement)(ae,{passwordProtected:E,nonce:n,src:k,setSrc:P,source:c,setQualities:O}),(0,e.createElement)("div",{className:"plyr_wrapper "+(S?"hideUI":""),id:l,"data-unique-id":ne(5)},i&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"fake_close_btn"},"x")," ",(0,e.createElement)("span",{className:"h5vp_popup_area_title"},"popup")),(0,e.createElement)(e.Fragment,null,"vimeo"===L&&(0,e.createElement)(re,{source:ee(k)}),"youtube"===L&&(0,e.createElement)(G,{source:s(k)})),["self-hosted","amazons3"].includes(L)&&(0,e.createElement)(Z,{qualities:k?q:[],source:k,poster:p,autoPlay:C,muted:A,loop:M?.active,preload:y.preload,isPremium:z,playsInline:y.playsinline}),z&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(te,{endScreen:g,player:F.current}),(0,e.createElement)(K,{...b,player:F.current?.player})))):(0,e.createElement)("h3",null,"Video source missing")},{createRoot:ce}=ReactDOM;document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('[class^="wp-block-html5-player-"]').forEach(t=>{if(!t.dataset.attributes||!t.dataset.nonce)return;const s=JSON.parse(t.dataset.attributes),r=t.dataset.nonce;ce(t).render((0,e.createElement)(le,{attributes:s,nonce:r})),t.removeAttribute("data-attributes"),t.removeAttribute("data-nonce")})}),window.addEventListener("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/H5VPPlayer.default",function(t){const s=t[0].querySelector(".html5_video_players");if(!s.dataset.attributes||!s.dataset.nonce)return;const r=JSON.parse(s.dataset.attributes),n=s.dataset.nonce;ce(s).render((0,e.createElement)(le,{attributes:r,nonce:n})),s.removeAttribute("data-attributes"),s.removeAttribute("data-nonce")})})})();