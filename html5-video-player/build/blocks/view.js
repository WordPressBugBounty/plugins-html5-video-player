(()=>{"use strict";var e={795:e=>{e.exports=window.ReactDOM},822:(e,t,r)=>{var s=r(795);t.H=s.createRoot,s.hydrateRoot}},t={};const r=window.React;var s=function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}(822);const n=(e,t={},s=!1)=>{const[n,a]=(0,r.useState)(!s),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[p,u]=(0,r.useState)(null);if(!wp.ajax)return void console.error("Please use wp-util as a dependency");const d=(r={})=>{a(!0),o(!1),c(null),wp.ajax.post(e,{...t,...r}).done((e=>{u(e),a(!1)})).fail((e=>{o(!0),c(e),a(!1)}))},h=async(e={})=>{d(e)};return(0,r.useEffect)((()=>{s||d(t)}),[]),{data:p,saveData:h,refetch:h,isLoading:n,isError:i,error:l}},a=function(e){return/^(?:(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?([a-zA-Z0-9_-]+))$/.test(e)?e:!!/^[a-zA-Z0-9_-]{11}$/.test(e)&&`https://www.youtube.com/watch?v=${e}`};var i=Symbol.for("immer-nothing"),o=Symbol.for("immer-draftable"),l=Symbol.for("immer-state");function c(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var p=Object.getPrototypeOf;function u(e){return!!e&&!!e[l]}function d(e){return!!e&&(m(e)||Array.isArray(e)||!!e[o]||!!e.constructor?.[o]||b(e)||w(e))}var h=Object.prototype.constructor.toString();function m(e){if(!e||"object"!=typeof e)return!1;const t=p(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===h}function y(e,t){0===f(e)?Reflect.ownKeys(e).forEach((r=>{t(r,e[r],e)})):e.forEach(((r,s)=>t(s,r,e)))}function f(e){const t=e[l];return t?t.type_:Array.isArray(e)?1:b(e)?2:w(e)?3:0}function _(e,t){return 2===f(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function v(e,t,r){const s=f(e);2===s?e.set(t,r):3===s?e.add(r):e[t]=r}function b(e){return e instanceof Map}function w(e){return e instanceof Set}function g(e){return e.copy_||e.base_}function E(e,t){if(b(e))return new Map(e);if(w(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=m(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[l];let r=Reflect.ownKeys(t);for(let s=0;s<r.length;s++){const n=r[s],a=t[n];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[n]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[n]})}return Object.create(p(e),t)}{const t=p(e);if(null!==t&&r)return{...e};const s=Object.create(t);return Object.assign(s,e)}}function S(e,t=!1){return P(e)||u(e)||!d(e)||(f(e)>1&&(e.set=e.add=e.clear=e.delete=k),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>S(t,!0)))),e}function k(){c(2)}function P(e){return Object.isFrozen(e)}var T,L={};function I(e){const t=L[e];return t||c(0),t}function $(){return T}function z(e,t){t&&(I("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function C(e){N(e),e.drafts_.forEach(j),e.drafts_=null}function N(e){e===T&&(T=e.parent_)}function x(e){return T={drafts_:[],parent_:T,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function j(e){const t=e[l];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function O(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[l].modified_&&(C(t),c(4)),d(e)&&(e=A(t,e),t.parent_||M(t,e)),t.patches_&&I("Patches").generateReplacementPatches_(r[l].base_,e,t.patches_,t.inversePatches_)):e=A(t,r,[]),C(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==i?e:void 0}function A(e,t,r){if(P(t))return t;const s=t[l];if(!s)return y(t,((n,a)=>F(e,s,t,n,a,r))),t;if(s.scope_!==e)return t;if(!s.modified_)return M(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const t=s.copy_;let n=t,a=!1;3===s.type_&&(n=new Set(t),t.clear(),a=!0),y(n,((n,i)=>F(e,s,t,n,i,r,a))),M(e,t,!1),r&&e.patches_&&I("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function F(e,t,r,s,n,a,i){if(u(n)){const i=A(e,n,a&&t&&3!==t.type_&&!_(t.assigned_,s)?a.concat(s):void 0);if(v(r,s,i),!u(i))return;e.canAutoFreeze_=!1}else i&&r.add(n);if(d(n)&&!P(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;A(e,n),t&&t.scope_.parent_||"symbol"==typeof s||!Object.prototype.propertyIsEnumerable.call(r,s)||M(e,n)}}function M(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&S(t,r)}var q={get(e,t){if(t===l)return e;const r=g(e);if(!_(r,t))return function(e,t,r){const s=H(t,r);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}(e,r,t);const s=r[t];return e.finalized_||!d(s)?s:s===W(e.base_,t)?(V(e),e.copy_[t]=B(s,e)):s},has:(e,t)=>t in g(e),ownKeys:e=>Reflect.ownKeys(g(e)),set(e,t,r){const s=H(g(e),t);if(s?.set)return s.set.call(e.draft_,r),!0;if(!e.modified_){const s=W(g(e),t),i=s?.[l];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((n=r)===(a=s)?0!==n||1/n==1/a:n!=n&&a!=a)&&(void 0!==r||_(e.base_,t)))return!0;V(e),R(e)}var n,a;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==W(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,V(e),R(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=g(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:s.enumerable,value:r[t]}:s},defineProperty(){c(11)},getPrototypeOf:e=>p(e.base_),setPrototypeOf(){c(12)}},D={};function W(e,t){const r=e[l];return(r?g(r):e)[t]}function H(e,t){if(!(t in e))return;let r=p(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=p(r)}}function R(e){e.modified_||(e.modified_=!0,e.parent_&&R(e.parent_))}function V(e){e.copy_||(e.copy_=E(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function B(e,t){const r=b(e)?I("MapSet").proxyMap_(e,t):w(e)?I("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),s={type_:r?1:0,scope_:t?t.scope_:$(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=s,a=q;r&&(n=[s],a=D);const{revoke:i,proxy:o}=Proxy.revocable(n,a);return s.draft_=o,s.revoke_=i,o}(e,t);return(t?t.scope_:$()).drafts_.push(r),r}function X(e){if(!d(e)||P(e))return e;const t=e[l];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=E(e,t.scope_.immer_.useStrictShallowCopy_)}else r=E(e,!0);return y(r,((e,t)=>{v(r,e,X(t))})),t&&(t.finalized_=!1),r}y(q,((e,t)=>{D[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),D.deleteProperty=function(e,t){return D.set.call(this,e,t,void 0)},D.set=function(e,t,r){return q.set.call(this,e[0],t,r,e[0])};var J=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const s=this;return function(e=r,...n){return s.produce(e,(e=>t.call(this,e,...n)))}}let s;if("function"!=typeof t&&c(6),void 0!==r&&"function"!=typeof r&&c(7),d(e)){const n=x(this),a=B(e,void 0);let i=!0;try{s=t(a),i=!1}finally{i?C(n):N(n)}return z(n,r),O(s,n)}if(!e||"object"!=typeof e){if(s=t(e),void 0===s&&(s=e),s===i&&(s=void 0),this.autoFreeze_&&S(s,!0),r){const t=[],n=[];I("Patches").generateReplacementPatches_(e,s,t,n),r(t,n)}return s}c(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,s;return[this.produce(e,t,((e,t)=>{r=e,s=t})),r,s]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;d(e)||c(8),u(e)&&(u(t=e)||c(10),e=X(t));const r=x(this),s=B(e,void 0);return s[l].isManual_=!0,N(r),s}finishDraft(e,t){const r=e&&e[l];r&&r.isManual_||c(9);const{scope_:s}=r;return z(s,t),O(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(0===s.path.length&&"replace"===s.op){e=s.value;break}}r>-1&&(t=t.slice(r+1));const s=I("Patches").applyPatches_;return u(e)?s(e,t):this.produce(e,(e=>s(e,t)))}},U=J.produce;J.produceWithPatches.bind(J),J.setAutoFreeze.bind(J),J.setUseStrictShallowCopy.bind(J),J.applyPatches.bind(J),J.createDraft.bind(J),J.finishDraft.bind(J);var Y=class{constructor(){this.callbacks={}}addEventListener(e,t){"function"==typeof t&&(void 0===this.callbacks[e]&&(this.callbacks[e]=[void 0]),this.callbacks[e].push(t))}on(e,t){this.addEventListener(e,t)}dispatchEvent(e,t){if(void 0===this.callbacks[e])return;let r=new Y.Event;r.type=e,r.target=this,r.data=t,this.callbacks[e].forEach((e=>{"function"==typeof e&&e(r)}))}},K=Y;K.Event=class{constructor(){this.type="",this.target={},this.data={}}};const Z=class extends K{constructor(e,t,r={},s=!1){super(),this.media=e,this.poster=null,this.isPremium=s,this.features=r,this.options=U(t,(e=>{e.markers.enabled=!0,t.speed&&(e.speed.options=t.speed.options.map((e=>parseFloat(e)))),e.fullscreen={container:".plyr_wrapper",iosNative:!0},e.autoplay=!this.features.autoplayWhenVisible&&t.autoplay})),this.local=window.h5vpBlock||{},t.urls.enabled||(this.options=U(this.options,(e=>{e.urls.download=null}))),this.media.closest(".plyr_wrapper")?.offsetWidth<=425&&(this.options=U(this.options,(e=>{e.controls=this.options.controls.filter((e=>!["fast-forward","restart","rewind"].includes(e)))}))),this.options.muted?this.options=U(this.options,(e=>{e.volume=0,e.storage.enabled=!1})):this.options=U(this.options,(e=>{e.volume=.5,e.storage.enabled=!0})),this.player=new Plyr(this.media,{...this.options,i18n:window.h5vpI18n||{}}),"m3u8"===this.media.src?.split(".").pop()&&this.videoHls(),"mpd"===this.media.src?.split(".").pop()&&this.videoDash(),this.features.passwordProtected?.enabled||"none"===this.options.preload||this.init(),this.player.on("pause",(()=>{this.features.disablePause&&this.player.play()})),window.instance||(window.instance=[]),window.instance.push(this.player),this.player.on("play",(()=>{setTimeout((()=>{const e=this.player?.elements?.inputs?.seek;e&&e.value<=0&&this.player.on("timeupdate",(()=>{const t=100/this.player.duration*this.player.currentTime;e&&(e.setAttribute("style",`--value:${t}%`),e.value=t)}))}),3e3)})),this.player.elements?.buttons?.mute?.addEventListener("click",(()=>{0===this.player.volume&&(this.player.volume=.4)})),this.addEventListener("update-source",(({data:e})=>{this.setSource(e.source,e.qualities,e.captions)}))}setIsPremium(e){this.isPremium=e}setSource(e=null,t=null,r=null){t=t||this.features.qualities;const s=t?.map((e=>({type:`video/${e?.video_file?.split(".").pop()}`,size:parseInt(e.size),src:e.video_file})))||[],n=this.features.captions?.map(((e,t)=>{if(e.caption_file){const t=e.label.split("/");return{kind:"captions",size:e.size,label:t[0],srclang:t[1],src:e.caption_file}}}))||[];this.player.download=this.player.source,(this.player.source||e)&&s.push({src:this.player.source||e,type:"video/mp4",size:720}),this.player.source={type:"video",title:"",sources:s,poster:this.player.poster&&"false"!==this.player.poster?this.player.poster:""},n?.map((e=>{if(e?.src){const t=document.createElement("track");Object.assign(t,e),this.player.media.appendChild(t)}}))}reInit(){this.init()}init(){if(!this.player)return void console.error("something went wrong!");const e=this.features.qualities?.map((e=>({type:`video/${e?.video_file?.split(".").pop()}`,size:parseInt(e.size),src:e.video_file})))||[],t=this.features.captions?.map(((e,t)=>{const r=e.label.split("/");return{kind:"captions",size:e.size,label:r[0],srclang:r[1],src:e.caption_file}}))||[];this.player.download=this.player.source,this.player.source&&e.push({src:this.player.source,type:"video/mp4",size:720}),this.player.source={type:"video",sources:e,poster:this.player.poster&&"false"!==this.player.poster?this.player.poster:""},t?.map((e=>{if(e?.src){const t=document.createElement("track");Object.assign(t,e),this.player.media.appendChild(t)}})),this.player.on("play",(()=>{window.location.pathname.includes("/wp-admin")&&(this.player.pause(),this.player.currentTime=0)})),"object"==typeof this.features&&(this.makeElementSticky(this.features.sticky),this.createChapter(),this.watermark(this.features.watermark),this.thumbInPause(this.features?.thumbInPause),this.autoplayWhenVisible(),this.pauseOther(),this.createView(),this.landScapeWhenFullscreen()),this.player.on("play",(()=>{this.disabled&&(this.player.currentTime=0,this.player.pause())})),this.player.on("ready",(()=>{this.media.plyr=this.player,this.features.startTime&&setTimeout((()=>{this.player.currentTime=parseInt(this.features.startTime)}),200),this.options.autoplay&&this.player?.play(),this.controlTouchAction();const e=this.player.elements?.progress?.offsetWidth;e<50&&!this.features.popup&&this.player.elements?.container?.classList?.add("h5vp_progressbar_up")}))}createView(e=!1){this.player.on("pause",(()=>{if(!this.videoId||!this.isPremium)return;let t=!1;const r=this.player?.currentTime;let s=localStorage.getItem(`video-progress-max-${this.videoId}`),n=new Date;s?s=JSON.parse(s):localStorage.setItem(`video-progress-max-${this.videoId}`,JSON.stringify({currentTime:r,created_at:n}));const a=(n-new Date(s?.created_at))/6e4;let i=!1;i=e?this.player.playing&&(r>=s?.currentTime||a>1440):r>=s?.currentTime||a>1440,i&&(a>1440&&(s.created_at=n),s.currentTime=this.player.currentTime,localStorage.setItem(`video-progress-max-${this.videoId}`,JSON.stringify(s)),t||(t=!0,wp.ajax.post("h5vp_ajax_handler",{nonce:this.nonce,model:"View",method:"createOrUpdate",video_id:this.videoId,duration:parseInt(this.player.currentTime)}).done((e=>{console.log(e)})).fail((e=>{console.log(e)}))))}))}autoplayWhenVisible(){if(this.features.playWhenVisible){let e=!1;this.player.on("ready",(()=>{window.addEventListener("scroll",(()=>{if(!this.isPremium)return!1;this.player.elements?.container?.offsetParent?.offsetTop<window.scrollY&&!e&&(this.player.muted=!0,this.player.play(),e=!0)}))}))}}makeElementSticky(e){if(!e?.enabled)return!1;const t=this.player.elements.fullscreen;if(t&&this.player){const r=t.getBoundingClientRect().top,s=function(e){let t=document.createElement("template");return t.innerHTML=e,t.content.firstChild}("<span class='close'>&times;</span>");window.addEventListener("scroll",(()=>{if(!this.isPremium)return;const n=t.querySelector(".close");window.scrollY>=r&&this.player.playing?(t.classList.add(e.position),t.classList.add("sticky"),n||t.appendChild(s)):this.player.playing||(t.classList.remove("sticky"),t.classList.remove(e.position)),s.addEventListener("click",(()=>{t.classList.remove(e.position),t.classList.remove("sticky"),this.player.pause()}))}))}}createChapter(){const e=this.player?.elements?.container,t=this.options.markers.points?.map((e=>({...e,time:this.chapterTimeToSeconds(e.time)})));if(!Array.isArray(t)||!e)return!1;const r=e.querySelector(".h5vp-chapter-wrapper");if(!t||r||!t.length)return!1;const s=document.createElement("div"),n=document.createElement("div"),a=document.createElement("button"),i=document.createElement("div");a.classList="h5vp-chapter-button plyr__controls__item plyr__control",a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 487.3 487.3"> <path d="M487.2,69.7c0,12.9-10.5,23.4-23.4,23.4h-322c-12.9,0-23.4-10.5-23.4-23.4s10.5-23.4,23.4-23.4h322.1 C476.8,46.4,487.2,56.8,487.2,69.7z M463.9,162.3H141.8c-12.9,0-23.4,10.5-23.4,23.4s10.5,23.4,23.4,23.4h322.1 c12.9,0,23.4-10.5,23.4-23.4C487.2,172.8,476.8,162.3,463.9,162.3z M463.9,278.3H141.8c-12.9,0-23.4,10.5-23.4,23.4 s10.5,23.4,23.4,23.4h322.1c12.9,0,23.4-10.5,23.4-23.4C487.2,288.8,476.8,278.3,463.9,278.3z M463.9,394.3H141.8 c-12.9,0-23.4,10.5-23.4,23.4s10.5,23.4,23.4,23.4h322.1c12.9,0,23.4-10.5,23.4-23.4C487.2,404.8,476.8,394.3,463.9,394.3z M38.9,30.8C17.4,30.8,0,48.2,0,69.7s17.4,39,38.9,39s38.9-17.5,38.9-39S60.4,30.8,38.9,30.8z M38.9,146.8 C17.4,146.8,0,164.2,0,185.7s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9S60.4,146.8,38.9,146.8z M38.9,262.8 C17.4,262.8,0,280.2,0,301.7s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9S60.4,262.8,38.9,262.8z M38.9,378.7 C17.4,378.7,0,396.1,0,417.6s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9C77.8,396.2,60.4,378.7,38.9,378.7z"/> </svg><span class="plyr__tooltip">Chapter</span>',s.classList="h5vp-chapter-wrapper",n.classList="h5vp-chapter-list-wrapper",i.classList="h5vp-chapter-list",t.map((t=>{if(""!=(t?.label||t?.name)&&""!=t?.time){const r=this.chapterTimeToSeconds(t?.time),s=document.createElement("button");s.innerHTML=`<span>${t?.label}</span>`,i.appendChild(s),s.onclick=()=>{i.classList.remove("showing"),this.player.currentTime=r,this.player.play()},a.onclick=()=>{i.classList.contains("showing")?i.classList.remove("showing"):i.classList.add("showing")},e.addEventListener("click",(function(e){i.contains(e.target)||a.contains(e.target)||i.classList.contains("showing")&&i.classList.remove("showing")})),this.onClick(e.querySelector(".plyr__controls__item.plyr__menu button"),(function(){i.classList.contains("showing")&&i.classList.remove("showing")}))}})),n?.appendChild(i),this.player.on("ready",(()=>{const t=e.querySelector(".plyr__controls__item.plyr__volume"),r=e.querySelector(".plyr__controls__item.plyr__menu"),s=e.querySelector(".plyr__controls__item[data-plyr='fullscreen']"),i=e.querySelector(".plyr__controls__item.plyr__time--current.plyr__time");t?t.before(a):r?r.before(a):s?s.before(a):i&&i.before(a),e.querySelector(".plyr__controls")?.after(n)}))}watermark(e={}){const{enabled:t,type:r,text:s,color:n}=e,a=this.player.elements?.container;if(!a||!t)return!1;let i=s;setTimeout((async()=>{if(["email","name"].includes(r))try{this.disabled=!0;const e=await wp.ajax.post("watermark_data",{nonce:this.nonce||window.h5vpBlock?.nonce});i=e.user[r]||window.location.origin,this.disabled=!1}catch(e){this.disabled=!1}let e="watermark";this.player.on("play",(()=>{if(!this.isPremium)return!1;const t=setInterval((()=>{const t=document.querySelector(e);t&&a.removeChild(t),e="watermark"+Math.round(1e3*Math.random());const s=document.createElement(e);s.setAttribute("style","display: block !important"),"email"===r&&(s.innerText=i),a.appendChild(s),s.innerText=i,s.setAttribute("style",`position:absolute; display:block !important; opacity:1 !important;top: ${Math.round(90*Math.random())}% !important; left: ${Math.round(70*Math.random())}% !important; transform: none !important`),s.style.color=n,a.appendChild(s)}),2e3);this.player.on("pause",(()=>{setTimeout((()=>{clearInterval(t);const r=document.querySelector(e);r&&a.removeChild(r)}),0)}))}))}),100)}thumbInPause(){if(this.features?.thumbInPause?.enabled)if("custom"==this.features.thumbInPause?.type){const e=document.createElement("img"),t=this.player?.elements?.buttons?.play?.[0];this.player.on("ready",(()=>{e.src=this.poster;const t=this.player?.elements?.buttons?.play?.[0];t&&(t.classList.add("thumbInPause"),this.poster&&t.appendChild(e))})),this.player.on("play",(()=>{t?.classList.remove("thumbInPause")})),this.player.on("pause",(()=>{t?.classList.add("thumbInPause")}))}else this.player.on("pause",(()=>{this.player?.elements?.container&&this.player?.elements?.container.classList.add("plyr--stopped")}))}destroy(){this.player?.destroy()}chapterTimeToSeconds(e=""){const t=e.toString().match(/(\d+):(\d+)/);return null==t?parseInt(e):60*parseInt(t[1])+parseInt(t[2])}getTTT(e=10,t=10){return e/100*t-e/100*(100-t)}onClick(e,t){e&&e.addEventListener("click",t)}on(e,t){this.player.on(e,t)}setNonce(e){this.nonce=e}setVideoId(e){this.videoId=e}videoHls(){const e=()=>{if(window.Hls?.isSupported()){const e=new window.Hls;e.loadSource(this.player.media.src),this.player.on("ready",(()=>{e.attachMedia(this.player.media)})),this.player.ready&&e.attachMedia(this.player.media),e.on(window.Hls.Events.MANIFEST_PARSED,(()=>{["metadata","none"].includes(this.options.preload)&&setTimeout((()=>{e.stopLoad()}),1e3),this.player.on("play",(function(){e.startLoad()}))})),this.player?.on("languagechange",(()=>{setTimeout((()=>e.subtitleTrack=this.player.currentTrack),50)}))}else console.warn("Hls does not support")};let t=document.getElementById("h5vp-hls-js");t?e():(t=document.createElement("script"),t.setAttribute("id","h5vp-hls-js"),t.src=this.local?.hls,document.getElementsByTagName("head")[0]?.prepend(t),t?.addEventListener("load",(()=>e())))}videoDash(){let e=document.getElementById("h5vp-dash-js");e?dashjs&&(window.dashjs.MediaPlayer().create().initialize(this.player.media,this.media.src,!0),this.player=new Plyr(this.player.media)):(e=document.createElement("script"),e.setAttribute("id","h5vp-dash-js"),e.src=this.local?.dash,document.getElementsByTagName("head")[0]?.prepend(e),e.addEventListener("load",(()=>{dashjs&&window.dashjs.MediaPlayer().create().initialize(this.player.media,this.player.media.src,!0)})))}controlTouchAction(){if(document.body.offsetWidth>992)return!1;const e=this.player.elements?.container;if(!e)return!1;const t=this.player,r=e.querySelector(".plyr__video-wrapper"),s=document.createElement("span");s.classList.add("seekSecond"),r.appendChild(s),t.eventListeners.forEach((t=>{"dblclick"===t.type&&e.removeEventListener(t.type,t.callback,t.options)})),r.parentNode.addEventListener("dblclick",(e=>{let t=e.target.getBoundingClientRect(),n=e.clientX-t.left;this.player.fullscreen.active&&(r.offsetWidth-150<n&&r.offsetWidth/2<n?(this.player.forward(this.options.seekTime),s.innerText=this.options.seekTime+" sec"):r.offsetWidth/2>n&&n<150&&(this.player.rewind(this.options.seekTime),s.innerText="-"+this.options.seekTime+" sec"),setTimeout((()=>{s.innerText=""}),1e3)),n>150&&n<r.offsetWidth-150&&this.player.fullscreen.toggle()})),e.addEventListener("touchstart",(e=>{this.player.fullscreen.active&&(this.touchClientX=e.touches[0].clientX,this.touchClientY=e.touches[0].clientY)}),!1),e.addEventListener("touchend",(e=>{if(!this.player.fullscreen.active)return;let r,n;r=e.changedTouches[0].clientX-this.touchClientX,n=e.changedTouches[0].clientY-this.touchClientX,r>5?(t.forward(parseInt(r)/10),s.innerText=parseInt(r/10)+" sec"):r<-5&&(t.rewind(Math.abs(r)/10),s.innerText=parseInt(r/10)+" sec"),setTimeout((()=>{s.innerText=""}),1e3)}),!1)}pauseOther(){if(location.pathname.includes("wp-admin"))return!1;window.hpublic?.pauseOther&&this.player.on("play",(()=>{const e=this.player.elements.fullscreen?.dataset?.uniqueId;document.querySelectorAll(`video:not([data-unique-id="${e}"] video, a video)`).forEach((e=>e.pause()))}))}domAttributesToObjectList(e){const t=[];return e.forEach((e=>{const r=e.attributes,s={};for(let e=0;e<r.length;e++){const t=r[e];s[t.name]=t.value}t.push(s)})),t}getStoredSettings(){return JSON.parse(window.localStorage.getItem("plyr"))}landScapeWhenFullscreen(){window?.innerWidth<992&&(this.player.on("enterfullscreen",(()=>{screen?.orientation?.lock("landscape")})),this.player.on("exitfullscreen",(()=>{screen?.orientation?.lock("portrait")})))}},Q=({enabled:e,items:t})=>e?(0,r.createElement)(r.Fragment,null,t.map(((e,t)=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)("style",null,`\n              .overlay_item_${t} p{\n                padding: 5px 12px;\n              }\n              .overlay_item_${t} p,\n              .overlay_item_${t} img,\n              .overlay_item_${t} a {\n              color: ${e.color};\n              font-size: ${e.fontSize};\n              background-color: ${e.backgroundColor};\n              border-radius: 3px px;\n              opacity: ${e.opacity}\n            }\n            .overlay_item_${t} a:hover,\n            .overlay_item_${t} p:hover {\n              color: ${e.hoverColor};\n            }\n            `.replace(/\s+/g," ")),(0,r.createElement)("div",{key:t,className:`h5vp_overlay ${e.position} overlay_item_${t}`},"text"===e.type?(0,r.createElement)("p",null,e.link?(0,r.createElement)("a",{href:e.link,rel:"noreferrer",target:"_blank"},e.text):(0,r.createElement)(r.Fragment,null,e.text)):e.link?(0,r.createElement)("a",{className:"background-transparent",href:e.link,rel:"noreferrer",target:"_blank"},(0,r.createElement)("img",{src:e.logo})):(0,r.createElement)("img",{src:e.logo})))))):(0,r.createElement)(r.Fragment,null),G=(window.wp.i18n,({setOpen:e,popup:t,poster:s})=>{const{align:n,enabled:a,btnStyle:i,hasBtn:o,selector:l,type:c,btnText:p}=t,{padding:u,...d}=i||{};return(0,r.useEffect)((()=>{"button"===c&&o&&l&&a&&document.querySelector([".","#","["].includes(l)?`${l}`:`.${l}`)?.addEventListener("click",(()=>{e(!0)}))}),[]),(0,r.createElement)(r.Fragment,null,a&&(0,r.createElement)("div",{className:"button"===c?`flex justify-${n}`:""},o&&"poster"!==c?(0,r.createElement)(r.Fragment,null):(0,r.createElement)(r.Fragment,null,"button"===c?(0,r.createElement)("button",{className:"popup_opener",onClick:()=>e(!0),style:{...d,padding:Object.values(u).join(" ")}},p):(0,r.createElement)(r.Fragment,null,s?(0,r.createElement)("div",{className:"popup_opener"},(0,r.createElement)("svg",{"aria-hidden":"true",focusable:"false",className:"popup_play",onClick:()=>e(!0)},(0,r.createElement)("use",{xlinkHref:"#plyr-play"})),(0,r.createElement)("img",{src:s,width:"100%"})):(0,r.createElement)("h3",null,"Poster missing"))),(0,r.createElement)("span",{onClick:()=>e(!1),className:"close"},"×")))}),ee=({subtitle:e,poster:t,source:s,qualities:n,isPremium:a,className:i="",reference:o,...l})=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)("video",{crossOrigin:!0,className:i,id:"player","data-poster":t||"",ref:o,src:s,...l,style:{width:"100%",maxWidth:"100%"}},a&&(0,r.createElement)(r.Fragment,null,Array.isArray(e)?e.map(((e,t)=>{if(!e.caption_file)return;const s=e.label.split("/");return(0,r.createElement)("track",{key:t,kind:"captions",srcLang:s[1]||" ",label:s[0]||"no label",src:e.caption_file})})):"",!["m3u8","mpd"].includes(s?.split(".").pop())&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("source",{src:s,size:720,type:`video/${s?.split(".").pop()}`})))),l["data-poster"]&&(0,r.createElement)("div",{className:"preload_poster",style:{background:`url(${l["data-poster"]})`}})),te=({height:e="10px",width:t="10px",color:s="#3498db",className:n="",style:a={}})=>(0,r.createElement)("div",{className:`simple-loader ${n}`,style:{height:e,width:t,borderTopColor:s,...a}}),re=({source:e="https://www.youtube.com/watch?v=MLpWrANjFbI",className:t="",...s})=>(0,r.createElement)("div",{className:`plyr__video-embed ${t}`,id:"player",...s},(0,r.createElement)("iframe",{src:e?`${e}?origin=${window.location.origin}&iv_load_policy=3&amp;modestbranding=1&amp;playsinline=1&amp;showinfo=0&amp;rel=0&amp;enablejsapi=1`:"",allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),s["data-poster"]&&(0,r.createElement)("div",{className:"preload_poster",style:{background:`url(${s["data-poster"]})`}})),se=function(e){if(!e)return!1;const t=/^(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/(video\/)?(\d+)(\/[^\s]*)?$/,r=e?.match(t)?.[5];return r?`https://player.vimeo.com/video/${r}`:isNaN(e)?t.test(e):`https://player.vimeo.com/video/${e}`},ne=({endScreen:e,player:t})=>{const{enabled:s,text:n,btnText:a,btnLink:i}=e,o=(0,r.useRef)(null);return(0,r.useEffect)((()=>{t?.player?.on("ended",(()=>{console.log("ended"),s&&(t.player.stop(),o.current.style.display="block",console.log("workign"))}))}),[t]),(0,r.createElement)(r.Fragment,null,s&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{ref:o,className:"h5vp_end_screen"},(0,r.createElement)("span",{className:"close",onClick:()=>{o.current.style.display="none"}},"×"),(0,r.createElement)("div",{className:"content"},(0,r.createElement)("p",null,n),a&&(0,r.createElement)("a",{target:"_blank",rel:"noreferrer",href:i},a)))))},ae=({styles:e={},uniqueId:t})=>{const[s,n]=(0,r.useState)(null);return(0,r.useEffect)((()=>{let r="";"object"==typeof e&&Object.keys(e).map((s=>{if("object"==typeof e[s]){let n="";Object.keys(e[s]).map((t=>{var r;n+=`${r=t,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}: ${e[s][t]};`})),r+=`#${t} ${[".","#"].includes(s[0])?"":"."}${s}{${n}} `}})),n(r)}),[e,t]),(0,r.createElement)("style",{dangerouslySetInnerHTML:{__html:s}})},ie=({source:e="https://player.vimeo.com/video/76979871",className:t="",...s})=>(0,r.createElement)("div",{className:`plyr__video-embed ${t}`,id:"player",...s},(0,r.createElement)("iframe",{src:e?`${e}?loop=false&amp;byline=false&amp;portrait=false&amp;title=false&amp;speed=true&amp;transparent=0&amp;gesture=media`:"",allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),s["data-poster"]&&(0,r.createElement)("div",{className:"preload_poster",style:{background:`url(${s["data-poster"]})`}})),oe=function(e){let t="";for(let r=0;r<e;r++){const e=Math.floor(52*Math.random());t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(e)}return t},le=({passwordProtected:e,setSrc:t,nonce:s,src:a,source:i,setQualities:o})=>{const{enabled:l,heading:c,button:p,key:u,errorMessage:d}=e,{data:h,refetch:m,isLoading:y}=n("h5vp_ajax_handler",{nonce:s,method:"check_password",model:"Video",key:u},!0),[f,_]=(0,r.useState)(null),[v,b]=(0,r.useState)(null),{text:w="Access"}=p||{};return(0,r.useEffect)((()=>{_(null),y||(h?(t(h.source),o(h.quality)):null!==h&&_(d||"Password didn't matched"))}),[y]),(0,r.createElement)(r.Fragment,null,l&&!a&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"password_form_overlay"}),(0,r.createElement)("div",{className:"password_form"},(0,r.createElement)("form",{onSubmit:e=>{e.preventDefault(),m({key:u,password:v})}},c&&(0,r.createElement)("h3",{className:"password_form_heading"},c),(0,r.createElement)("input",{type:"password",className:"password_form_input",placeholder:"Password",onChange:e=>b(e.target.value)}),(0,r.createElement)("button",{className:"password_form_button",disabled:y},y&&(0,r.createElement)(te,{style:{borderWidth:"2px"}})," ",w),f&&(0,r.createElement)("p",{className:"password_form_error"},f)))))},ce=({attributes:e,nonce:t=window.h5vpBlock?.nonce})=>{const{additionalCSS:s,additionalID:i,source:o,poster:l,provider:c,qualities:p,quality:u,subtitle:d,options:h,features:m,uniqueId:y,styles:f}=e,{popup:_,overlay:v,endScreen:b,passwordProtected:w={},hideYoutubeUI:g}=m,[E,S]=(0,r.useState)(w.enabled?"":o),[k,P]=(0,r.useState)(!1),[T,L]=(0,r.useState)("library"===c?"self-hosted":c),{autoplay:I,muted:$,loop:z}=h,{data:C,isLoading:N}=n("pipe_handler",{nonce:t}),{data:x}=n("h5vp_ajax_handler",{nonce:t,src:E,method:"get_id",model:"Video"}),[j,O]=(0,r.useState)(p||u),A=(0,r.useRef)(null),F=(0,r.useRef)(null);return(0,r.useEffect)((()=>{k?F.current?.player.play():F.current?.player.pause()}),[k]),(0,r.useEffect)((()=>{A.media=A.current?.querySelector("#player")}),[A]),(0,r.useEffect)((()=>{const e=A.current?.querySelector("#player");return e&&(F.current=new Z(e,h,{...m,qualities:j,captions:d}),F.current.poster=l,F.current?.on("ready",(function(){const e=setInterval((()=>{F.current.player?.elements?.poster&&l&&(clearInterval(e),F.current.player.elements.poster.style.backgroundImage=`url(${l})`)}),500)}))),()=>{F.current?.destroy()}}),[h,m,j,d]),(0,r.useEffect)((()=>{F.current&&!F.current?.nonce&&F.current.setNonce(t),F.current&&!F.current?.videoId&&F.current.setVideoId(x)}),[t,x,F.current]),(0,r.useEffect)((()=>{F.current&&F.current.setIsPremium(C),N||C||"self-hosted"===T||F.current?.destroy()}),[C,N,T,F.current]),(0,r.useEffect)((()=>{T||(a(o)?L("youtube"):se(o)?L("vimeo"):L("self-hosted"))}),[o]),(0,r.useEffect)((()=>{F.current?.player&&l&&(F.current.player.poster=l)}),[E,l]),(0,r.useEffect)((()=>{setTimeout((()=>{F.current?.player&&w.enabled&&F.current.dispatchEvent("update-source",{source:E,qualities:j})}),0)}),[E]),(0,r.useEffect)((()=>{window.sources?window.sources.push(o):window.sources=[o]}),[E,o]),(0,r.useEffect)((()=>{S(w.enabled?"":o)}),[o]),o?(0,r.createElement)("div",{ref:A,id:y,className:`h5vp_player_temp  ${_.enabled?"h5vp_popup_enabled":""} ${k?"h5vp_popup_open":""}`},(0,r.createElement)(ae,{styles:f,uniqueId:y}),(0,r.createElement)("style",null,s),C&&(0,r.createElement)(G,{setOpen:P,popup:_,poster:l}),(0,r.createElement)(le,{passwordProtected:w,nonce:t,src:E,setSrc:S,source:o,setQualities:O}),(0,r.createElement)("div",{className:"plyr_wrapper "+(g?"hideUI":""),id:i,"data-unique-id":oe(5)},(0,r.createElement)(r.Fragment,null,"vimeo"===T&&(0,r.createElement)(ie,{source:se(E)}),"youtube"===T&&(0,r.createElement)(re,{source:a(E)})),["self-hosted","amazons3"].includes(T)&&(0,r.createElement)(ee,{qualities:E?j:[],source:w.enabled?E:o,poster:l,autoPlay:I,muted:$,loop:z?.active,preload:h.preload,isPremium:C,playsInline:h.playsinline}),C&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ne,{endScreen:b,player:F.current}),(0,r.createElement)(Q,{...v,player:F.current?.player})))):(0,r.createElement)("h3",null,"Video source missing")};document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[class^="wp-block-html5-player-"]').forEach((e=>{if(!e.dataset.attributes||!e.dataset.nonce)return;const t=JSON.parse(e.dataset.attributes),n=e.dataset.nonce;(0,s.H)(e).render((0,r.createElement)(ce,{attributes:t,nonce:n})),e.removeAttribute("data-attributes"),e.removeAttribute("data-nonce")}))})),window.addEventListener("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/H5VPPlayer.default",(function(e,t){const n=e[0].querySelector(".html5_video_players");if(!n.dataset.attributes||!n.dataset.nonce)return;const a=JSON.parse(n.dataset.attributes),i=n.dataset.nonce;(0,s.H)(n).render((0,r.createElement)(ce,{attributes:a,nonce:i})),n.removeAttribute("data-attributes"),n.removeAttribute("data-nonce")}))}))})();