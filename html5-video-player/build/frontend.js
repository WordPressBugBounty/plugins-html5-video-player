(()=>{"use strict";const e=window.React,t=window.ReactDOM,s=(t,s={},n=!1)=>{const[r,i]=(0,e.useState)(!n),[a,o]=(0,e.useState)(!1),[l,c]=(0,e.useState)(null),[p,d]=(0,e.useState)(null);if(!wp.ajax)return void console.error("Please use wp-util as a dependency");const u=(e={})=>{i(!0),o(!1),c(null),wp.ajax.post(t,{...s,...e}).done(e=>{d(e),i(!1)}).fail(e=>{o(!0),c(e),i(!1)})},h=async(e={})=>{u(e)};return(0,e.useEffect)(()=>{n||u(s)},[]),{data:p,saveData:h,refetch:h,isLoading:r,isError:a,error:l}},n=function(e){return!!e&&(/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})(?:[?&][^\s]*)?$/.test(e)?e:!!/^[a-zA-Z0-9_-]{11}$/.test(e)&&`https://www.youtube.com/watch?v=${e}`)};var r=Symbol.for("immer-nothing"),i=Symbol.for("immer-draftable"),a=Symbol.for("immer-state");function o(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var l=Object.getPrototypeOf;function c(e){return!!e&&!!e[a]}function p(e){return!!e&&(u(e)||Array.isArray(e)||!!e[i]||!!e.constructor?.[i]||_(e)||v(e))}var d=Object.prototype.constructor.toString();function u(e){if(!e||"object"!=typeof e)return!1;const t=l(e);if(null===t)return!0;const s=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return s===Object||"function"==typeof s&&Function.toString.call(s)===d}function h(e,t){0===m(e)?Reflect.ownKeys(e).forEach(s=>{t(s,e[s],e)}):e.forEach((s,n)=>t(n,s,e))}function m(e){const t=e[a];return t?t.type_:Array.isArray(e)?1:_(e)?2:v(e)?3:0}function y(e,t){return 2===m(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function f(e,t,s){const n=m(e);2===n?e.set(t,s):3===n?e.add(s):e[t]=s}function _(e){return e instanceof Map}function v(e){return e instanceof Set}function w(e){return e.copy_||e.base_}function b(e,t){if(_(e))return new Map(e);if(v(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=u(e);if(!0===t||"class_only"===t&&!s){const t=Object.getOwnPropertyDescriptors(e);delete t[a];let s=Reflect.ownKeys(t);for(let n=0;n<s.length;n++){const r=s[n],i=t[r];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[r]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[r]})}return Object.create(l(e),t)}{const t=l(e);if(null!==t&&s)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function g(e,t=!1){return S(e)||c(e)||!p(e)||(m(e)>1&&(e.set=e.add=e.clear=e.delete=E),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>g(t,!0))),e}function E(){o(2)}function S(e){return Object.isFrozen(e)}var k,P={};function T(e){const t=P[e];return t||o(0),t}function I(){return k}function L(e,t){t&&(T("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function N(e){C(e),e.drafts_.forEach(M),e.drafts_=null}function C(e){e===k&&(k=e.parent_)}function A(e){return k={drafts_:[],parent_:k,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function M(e){const t=e[a];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function z(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];return void 0!==e&&e!==s?(s[a].modified_&&(N(t),o(4)),p(e)&&(e=x(t,e),t.parent_||q(t,e)),t.patches_&&T("Patches").generateReplacementPatches_(s[a].base_,e,t.patches_,t.inversePatches_)):e=x(t,s,[]),N(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==r?e:void 0}function x(e,t,s){if(S(t))return t;const n=t[a];if(!n)return h(t,(r,i)=>$(e,n,t,r,i,s)),t;if(n.scope_!==e)return t;if(!n.modified_)return q(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let r=t,i=!1;3===n.type_&&(r=new Set(t),t.clear(),i=!0),h(r,(r,a)=>$(e,n,t,r,a,s,i)),q(e,t,!1),s&&e.patches_&&T("Patches").generatePatches_(n,s,e.patches_,e.inversePatches_)}return n.copy_}function $(e,t,s,n,r,i,a){if(c(r)){const a=x(e,r,i&&t&&3!==t.type_&&!y(t.assigned_,n)?i.concat(n):void 0);if(f(s,n,a),!c(a))return;e.canAutoFreeze_=!1}else a&&s.add(r);if(p(r)&&!S(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;x(e,r),t&&t.scope_.parent_||"symbol"==typeof n||!Object.prototype.propertyIsEnumerable.call(s,n)||q(e,r)}}function q(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&g(t,s)}var j={get(e,t){if(t===a)return e;const s=w(e);if(!y(s,t))return function(e,t,s){const n=B(t,s);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,s,t);const n=s[t];return e.finalized_||!p(n)?n:n===O(e.base_,t)?(H(e),e.copy_[t]=V(n,e)):n},has:(e,t)=>t in w(e),ownKeys:e=>Reflect.ownKeys(w(e)),set(e,t,s){const n=B(w(e),t);if(n?.set)return n.set.call(e.draft_,s),!0;if(!e.modified_){const n=O(w(e),t),o=n?.[a];if(o&&o.base_===s)return e.copy_[t]=s,e.assigned_[t]=!1,!0;if(((r=s)===(i=n)?0!==r||1/r==1/i:r!=r&&i!=i)&&(void 0!==s||y(e.base_,t)))return!0;H(e),W(e)}var r,i;return e.copy_[t]===s&&(void 0!==s||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==O(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,H(e),W(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const s=w(e),n=Reflect.getOwnPropertyDescriptor(s,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:s[t]}:n},defineProperty(){o(11)},getPrototypeOf:e=>l(e.base_),setPrototypeOf(){o(12)}},F={};function O(e,t){const s=e[a];return(s?w(s):e)[t]}function B(e,t){if(!(t in e))return;let s=l(e);for(;s;){const e=Object.getOwnPropertyDescriptor(s,t);if(e)return e;s=l(s)}}function W(e){e.modified_||(e.modified_=!0,e.parent_&&W(e.parent_))}function H(e){e.copy_||(e.copy_=b(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function V(e,t){const s=_(e)?T("MapSet").proxyMap_(e,t):v(e)?T("MapSet").proxySet_(e,t):function(e,t){const s=Array.isArray(e),n={type_:s?1:0,scope_:t?t.scope_:I(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=n,i=j;s&&(r=[n],i=F);const{revoke:a,proxy:o}=Proxy.revocable(r,i);return n.draft_=o,n.revoke_=a,o}(e,t);return(t?t.scope_:I()).drafts_.push(s),s}function D(e){if(!p(e)||S(e))return e;const t=e[a];let s;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=b(e,t.scope_.immer_.useStrictShallowCopy_)}else s=b(e,!0);return h(s,(e,t)=>{f(s,e,D(t))}),t&&(t.finalized_=!1),s}h(j,(e,t)=>{F[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),F.deleteProperty=function(e,t){return F.set.call(this,e,t,void 0)},F.set=function(e,t,s){return j.set.call(this,e[0],t,s,e[0])};var U=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,s)=>{if("function"==typeof e&&"function"!=typeof t){const s=t;t=e;const n=this;return function(e=s,...r){return n.produce(e,e=>t.call(this,e,...r))}}let n;if("function"!=typeof t&&o(6),void 0!==s&&"function"!=typeof s&&o(7),p(e)){const r=A(this),i=V(e,void 0);let a=!0;try{n=t(i),a=!1}finally{a?N(r):C(r)}return L(r,s),z(n,r)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===r&&(n=void 0),this.autoFreeze_&&g(n,!0),s){const t=[],r=[];T("Patches").generateReplacementPatches_(e,n,t,r),s(t,r)}return n}o(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...s)=>this.produceWithPatches(t,t=>e(t,...s));let s,n;return[this.produce(e,t,(e,t)=>{s=e,n=t}),s,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;p(e)||o(8),c(e)&&(c(t=e)||o(10),e=D(t));const s=A(this),n=V(e,void 0);return n[a].isManual_=!0,C(s),n}finishDraft(e,t){const s=e&&e[a];s&&s.isManual_||o(9);const{scope_:n}=s;return L(n,t),z(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let s;for(s=t.length-1;s>=0;s--){const n=t[s];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}s>-1&&(t=t.slice(s+1));const n=T("Patches").applyPatches_;return c(e)?n(e,t):this.produce(e,e=>n(e,t))}},R=U.produce;U.produceWithPatches.bind(U),U.setAutoFreeze.bind(U),U.setUseStrictShallowCopy.bind(U),U.applyPatches.bind(U),U.createDraft.bind(U),U.finishDraft.bind(U);var Y=class{constructor(){this.callbacks={}}addEventListener(e,t){"function"==typeof t&&(void 0===this.callbacks[e]&&(this.callbacks[e]=[void 0]),this.callbacks[e].push(t))}on(e,t){this.addEventListener(e,t)}dispatchEvent(e,t){if(void 0===this.callbacks[e])return;let s=new Y.Event;s.type=e,s.target=this,s.data=t,this.callbacks[e].forEach(e=>{"function"==typeof e&&e(s)})}},X=Y;X.Event=class{constructor(){this.type="",this.target={},this.data={}}};class J{constructor(e,t){if(!(e&&e instanceof HTMLVideoElement))throw new Error("Html5VideoAnalyticsTracker: video must be an HTMLVideoElement");this.video=e,this.config={flushEveryMs:1e4,maxQueue:10,pageUrl:window.location.href,postId:null,userId:null,...t},this.progressMax=0,this.queue=[],this.milestonesFired=new Set,this.lastTime=0,this.isPlaying=!1,this.watchTimer=null,this.flushTimer=null,this.instanceId=this._getOrCreateInstanceId(e),this._onPlay=this._onPlay.bind(this),this._onPause=this._onPause.bind(this),this._onEnded=this._onEnded.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._onBeforeUnload=this._onBeforeUnload.bind(this)}start(){this._enqueue("impression",{}),this.video.addEventListener("play",this._onPlay),this.video.addEventListener("pause",this._onPause),this.video.addEventListener("ended",this._onEnded),this.video.addEventListener("timeupdate",this._onTimeUpdate),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("beforeunload",this._onBeforeUnload),this.flushTimer=window.setInterval(()=>this.flush(),this.config.flushEveryMs)}stop(){this._stopWatchTimer(),this.flushTimer&&window.clearInterval(this.flushTimer),this.video.removeEventListener("play",this._onPlay),this.video.removeEventListener("pause",this._onPause),this.video.removeEventListener("ended",this._onEnded),this.video.removeEventListener("timeupdate",this._onTimeUpdate),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("beforeunload",this._onBeforeUnload),this.flush(!0)}_onPlay(){this.isPlaying=!0,this.lastTime=this.video.currentTime||0,this._enqueue("play",{}),this._startWatchTimer()}_onPause(){this.isPlaying=!1,this._enqueue("pause",{}),this._stopWatchTimer(),this.flush()}_onEnded(){this.isPlaying=!1,this._updateProgressMax(100),this._enqueue("ended",{completed:1}),this._stopWatchTimer(),this.flush(!0)}_onTimeUpdate(){const e=this.video.duration;if(!e||!isFinite(e)||e<=0)return;const t=Math.floor(this.video.currentTime/e*100),s=[10,25,50,75,90];for(const e of s)t>=e&&!this.milestonesFired.has(e)&&(this.milestonesFired.add(e),this._updateProgressMax(e),this._enqueue("milestone",{milestone:e}))}_updateProgressMax(e){const t=Number(e);Number.isFinite(t)&&t>this.progressMax&&(this.progressMax=t)}_startWatchTimer(){this.watchTimer||(this.watchTimer=window.setInterval(()=>{if(!this.isPlaying)return;const e=this.video.currentTime||0,t=Math.max(0,Math.min(5,e-this.lastTime));this.lastTime=e,t>.25&&this._enqueue("watch_delta",{seconds:t}),this.queue.length>=this.config.maxQueue&&this.flush()},1e3))}_stopWatchTimer(){this.watchTimer&&(window.clearInterval(this.watchTimer),this.watchTimer=null)}_onVisibilityChange(){"hidden"===document.visibilityState?(this.isPlaying=!1,this._stopWatchTimer(),this.flush(!0)):(this.isPlaying=!this.video.paused,this._startWatchTimer(),this.flush(!1))}_onBeforeUnload(){this.flush(!0)}_enqueue(e,t){const s={event:e,ts:Date.now(),video_id:Number(this.config.videoId),post_id:this.config.postId?Number(this.config.postId):null,user_id:this.config.userId?Number(this.config.userId):null,page_url:this.config.pageUrl,instance_id:this.instanceId,session_id:this._h5vpGetSessionId(),progress_max:this.progressMax,current_time:this._safeNumber(this.video.currentTime),duration:this._safeNumber(this.video.duration),meta:t||{}};this.queue.push(s)}async flush(e=!1){if(!this.queue.length)return;const t={events:this.queue.splice(0,this.queue.length)};window.H5VP_ANALYTICS?.token&&(t.token=window.H5VP_ANALYTICS.token);const s=JSON.stringify(t);if(e&&navigator.sendBeacon)try{const e=new Blob([s],{type:"application/json"});if(navigator.sendBeacon(this.config.endpoint,e))return}catch(e){}const n={"Content-Type":"application/json","X-WP-Nonce":this.config.nonce};try{await fetch(this.config.endpoint,{method:"POST",headers:n,credentials:"same-origin",body:s,keepalive:e})}catch(e){}}_safeNumber(e){return"number"!=typeof e||!isFinite(e)||e<0?null:e}_getOrCreateInstanceId(e){if(e.dataset.h5vpInstanceId)return e.dataset.h5vpInstanceId;const t="h5vp_"+Math.random().toString(16).slice(2)+"_"+Date.now().toString(16);return e.dataset.h5vpInstanceId=t,t}_h5vpGetSessionId(){const e="h5vp_session_id",t="h5vp_session_last_ts",s=Date.now(),n=Number(localStorage.getItem(t)||0);let r=localStorage.getItem(e);return(!r||!n||s-n>18e5)&&(r="sess_"+Math.random().toString(16).slice(2)+"_"+s.toString(16),localStorage.setItem(e,r)),localStorage.setItem(t,String(s)),r}}const K=class extends X{constructor(e,t,{features:s,isBackend:n,isPremium:r,provider:i}){super(),this.media=e,this.poster=null,this.initialized=!1,this.streamLoaded=!1,this.isPremium=r,this.isBackend=n,this.features=s,this.container=this.media.closest(".wp-block-html5-player-video"),this.iconUrl=window.h5vpBlock?.plugin_url?window.h5vpBlock.plugin_url+"img/plyr.svg":"",this.onEvents=[],this.provider=i,this.options=R(t,e=>{e.markers&&(e.markers.enabled=!0),t.speed&&(e.speed.options=t.speed.options.map(e=>parseFloat(e))),t.speed?.options?.[0]||(e.speed={options:[.5,.75,1,1.25,1.5,1.75,2]}),e.fullscreen={container:".plyr_wrapper",iosNative:!0},e.autoplay=!(this.features.playWhenVisible||!this.isBackend)&&t.autoplay,e.ratio=t.ratio?.includes(":")?t.ratio:null,this.features.passwordProtected?.enabled&&!t.ratio?.includes(":")&&(e.ratio="16:9"),this.iconUrl&&(e.iconUrl=this.iconUrl)}),this.local=window.h5vpBlock||{},t.urls?.enabled||(this.options=R(this.options,e=>{e.urls={download:null}})),this.media.closest(".plyr_wrapper")?.offsetWidth<=425&&(this.options=R(this.options,e=>{e.controls=this.options.controls.filter(e=>!["fast-forward","restart","rewind"].includes(e))})),this.options.muted?this.options=R(this.options,e=>{e.volume=0,e.storage.enabled=!1}):this.options=R(this.options,e=>{e.volume=.5,e.storage={enabled:!0}}),"undefined"==typeof Plyr&&(console.error("Plyr is not defined. Please make sure Plyr library is loaded."),this.media.setAttribute("controls",!0)),setTimeout(()=>{"m3u8"===this.media.src?.split(".").pop()?(this.player=new Plyr(this.media,{...this.options,playsinline:!0,i18n:window.h5vpI18n||{}}),this.videoHls(),this.player.on("ready",()=>this.onReady())):"mpd"===this.media.src?.split(".").pop()?this.videoDash():this.features.passwordProtected?.enabled||"none"===this.options.preload?(this.player=new Plyr(this.media,{...this.options,playsinline:!0,i18n:window.h5vpI18n||{}}),this.player.on("ready",()=>this.onReady()),this.player.on("loadedmetadata",()=>{this.initialized||this.features.passwordProtected?.enabled||(this.init(),this.player.play())})):(this.player=new Plyr(this.media,{...this.options,i18n:window.h5vpI18n||{}}),this.player.on("ready",()=>this.onReady()),this.init()),this.saveState(),this.player?.on("pause",()=>{!this.features.disablePause||this.isBackend||this.features.popup?.enabled||this.player.play()}),window.instance||(window.instance=[]),window.instance.push(this.player),this.player?.on("play",()=>{setTimeout(()=>{const e=this.player?.elements?.inputs?.seek;e&&e.value<=0&&this.player.on("timeupdate",()=>{const t=100/this.player.duration*this.player.currentTime;e&&(e.setAttribute("style",`--value:${t}%`),e.value=t)})},3e3)}),this.player?.elements?.buttons?.mute?.addEventListener("click",()=>{0===this.player.volume&&(this.player.volume=.4)}),this.addEventListener("update-source",({data:e})=>{this.setSource(e.source,e.qualities,e.captions)}),this.player?.on("ready",()=>{this.poster&&this.player.elements?.poster&&setTimeout(()=>{this.player.elements.poster.style.cssText=`background-image:url(${this.poster});`},500)})},500)}onReady(){const e=this.player?.elements?.wrapper?.closest(".wp-block-html5-player-video");if(e&&(e.style.aspectRatio=""),this.onEvents.length>0&&(this.onEvents.forEach(e=>{this.player.on(e.eventName,e.callback)}),this.onEvents=[]),this.player?.elements?.container?.addEventListener("keydown",e=>{" "===e.key&&(e.preventDefault(),this.player.playing?this.player.pause():this.player.play())}),window.location.host.includes("dvrg")&&window.document.addEventListener("keydown",e=>{" "===e.key&&(this.player.playing?this.player.pause():this.player.play())}),this.features.customPlayButtonSelector){const e=document.querySelector(this.features.customPlayButtonSelector);e&&e.addEventListener("click",()=>{this.player.play()})}window.H5VP_ANALYTICS&&(window.initializedH5VPAnalytics||(window.initializedH5VPAnalytics=!0,document.querySelectorAll(".wp-block-html5-player-video[data-video-id]").forEach(e=>{const t=Number(e.dataset.videoId);t&&(e=e.querySelector("video"))&&new J(e,{endpoint:window.H5VP_ANALYTICS.endpoint,nonce:window.H5VP_ANALYTICS.nonce,videoId:t,postId:window.H5VP_ANALYTICS.postId||null,userId:window.H5VP_ANALYTICS.userId||null}).start()})))}setIsPremium(e){this.isPremium=e}setSource(e=null,t=null){t=t||this.features.qualities;const s=t?.map(e=>({type:`video/${e?.video_file?.split(".").pop()}`,size:parseInt(e.size),src:e.video_file}))||[];(this.player.source||e)&&s.push({src:e||this.player.source,type:"video/mp4",size:720}),this.player.source={type:"video",title:"",sources:s,poster:this.player.poster&&"false"!==this.player.poster?this.player.poster:""};const n=this.features.captions?.map(e=>{if(e.caption_file){const t=e.label.split("/");return{kind:"captions",size:e.size,label:t[0],srclang:t[1],src:e.caption_file}}})||[];this.player.download=this.player.source,n?.map(e=>{if(e?.src){const t=document.createElement("track");Object.assign(t,e),this.player.media.appendChild(t)}}),"m3u8"===e?.split(".").pop()?this.videoHls():"mpd"===e?.split(".").pop()&&(this.media.src=e,this.videoDash(!0,e))}reInit(){this.init()}init(){if(!this.player)return void console.error("something went wrong!");this.initialized=!0;const e=this.features.qualities?.map(e=>({type:`video/${e?.video_file?.split(".").pop()}`,size:parseInt(e.size),src:e.video_file})).filter(e=>e.src)||[],t=this.features.captions?.map(e=>{const t=e.label.split("/");return{kind:"captions",size:e.size,label:t[0],srclang:t[1],src:e.caption_file}})||[];this.player.download=this.player.source,(this.media.src||this.player.source)&&e.push({src:this.media.src||this.player.source,type:"video/mp4",size:720}),this.player.source={type:"video",sources:e,poster:this.player.poster&&"false"!==this.player.poster?this.player.poster:""},t?.map(e=>{if(e?.src){const t=document.createElement("track");Object.assign(t,e),this.player.media.appendChild(t)}}),this.player.on("play",()=>{window.location.pathname.includes("/wp-admin")&&(this.player.pause(),this.player.currentTime=0)}),"object"==typeof this.features&&(this.makeElementSticky(this.features.sticky),this.createChapter(),this.watermark(this.features.watermark),this.thumbInPause(this.features?.thumbInPause),this.playWhenVisible(),this.pauseOther(),this.landScapeWhenFullscreen()),this.player.on("play",()=>{this.disabled&&(this.player.currentTime=0,this.player.pause())}),this.player.on("ready",()=>{this.media.plyr=this.player,this.features.startTime&&!this.features.saveState&&setTimeout(()=>{this.player.forward(parseInt(this.features.startTime)),["youtube","vimeo"].includes(this.provider)&&(this.player.muted=!0,this.player.play(),setTimeout(()=>{this.player.pause(),this.player.muted=!1},900))},200),this.options.autoplay&&!this.isBackend&&this.player?.play(),this.controlTouchAction();const e=this.player.elements?.progress?.offsetWidth;e<50&&!this.features.popup&&this.player.elements?.container?.classList?.add("h5vp_progressbar_up")})}setPoster(e){this.player?.elements?.poster&&e&&(this.player.elements.poster.style.backgroundImage=`url(${e})`)}playWhenVisible(){if(this.features.playWhenVisible){let e=!1;this.player.on("ready",()=>{window.addEventListener("scroll",()=>{if(!this.isPremium)return!1;this.player.elements?.container?.offsetParent?.offsetTop<window.scrollY&&!e&&(setTimeout(()=>{this.player.playing||(this.player.muted=!0,this.player.play())},1e3),this.player.play(),e=!0)})})}}makeElementSticky(e){if(!e?.enabled)return!1;const t=this.player.elements.fullscreen;if(t&&this.player){const s=t.getBoundingClientRect().top,n=function(e){let t=document.createElement("template");return t.innerHTML=e,t.content.firstChild}("<span class='close'>&times;</span>");window.addEventListener("scroll",()=>{if(!this.isPremium)return;const r=t.querySelector(".close");window.scrollY>=s&&this.player.playing?(t.classList.add(e.position),t.classList.add("sticky"),r||t.appendChild(n)):this.player.playing||(t.classList.remove("sticky"),t.classList.remove(e.position)),n.addEventListener("click",()=>{t.classList.remove(e.position),t.classList.remove("sticky"),this.player.pause()})})}}createChapter(){const e=this.player?.elements?.container,t=this.options.markers.points?.map(e=>({...e,time:this.chapterTimeToSeconds(e.time)}));if(!Array.isArray(t)||!e)return!1;const s=e.querySelector(".h5vp-chapter-wrapper");if(!t||s||!t.length)return!1;const n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("button"),a=document.createElement("div");i.classList="h5vp-chapter-button plyr__controls__item plyr__control",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 487.3 487.3"> <path d="M487.2,69.7c0,12.9-10.5,23.4-23.4,23.4h-322c-12.9,0-23.4-10.5-23.4-23.4s10.5-23.4,23.4-23.4h322.1 C476.8,46.4,487.2,56.8,487.2,69.7z M463.9,162.3H141.8c-12.9,0-23.4,10.5-23.4,23.4s10.5,23.4,23.4,23.4h322.1 c12.9,0,23.4-10.5,23.4-23.4C487.2,172.8,476.8,162.3,463.9,162.3z M463.9,278.3H141.8c-12.9,0-23.4,10.5-23.4,23.4 s10.5,23.4,23.4,23.4h322.1c12.9,0,23.4-10.5,23.4-23.4C487.2,288.8,476.8,278.3,463.9,278.3z M463.9,394.3H141.8 c-12.9,0-23.4,10.5-23.4,23.4s10.5,23.4,23.4,23.4h322.1c12.9,0,23.4-10.5,23.4-23.4C487.2,404.8,476.8,394.3,463.9,394.3z M38.9,30.8C17.4,30.8,0,48.2,0,69.7s17.4,39,38.9,39s38.9-17.5,38.9-39S60.4,30.8,38.9,30.8z M38.9,146.8 C17.4,146.8,0,164.2,0,185.7s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9S60.4,146.8,38.9,146.8z M38.9,262.8 C17.4,262.8,0,280.2,0,301.7s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9S60.4,262.8,38.9,262.8z M38.9,378.7 C17.4,378.7,0,396.1,0,417.6s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9C77.8,396.2,60.4,378.7,38.9,378.7z"/> </svg><span class="plyr__tooltip">Chapter</span>',n.classList="h5vp-chapter-wrapper",r.classList="h5vp-chapter-list-wrapper",a.classList="h5vp-chapter-list",t.map(t=>{if(""!=(t?.label||t?.name)&&""!=t?.time){const s=this.chapterTimeToSeconds(t?.time),n=document.createElement("button");n.innerHTML=`<span>${t?.label}</span>`,a.appendChild(n),n.onclick=()=>{a.classList.remove("showing"),this.player.currentTime=s,this.player.play()},i.onclick=()=>{a.classList.contains("showing")?a.classList.remove("showing"):a.classList.add("showing")},e.addEventListener("click",function(e){a.contains(e.target)||i.contains(e.target)||a.classList.contains("showing")&&a.classList.remove("showing")}),this.onClick(e.querySelector(".plyr__controls__item.plyr__menu button"),function(){a.classList.contains("showing")&&a.classList.remove("showing")})}}),r?.appendChild(a),this.player.on("ready",()=>{const t=e.querySelector(".plyr__controls__item.plyr__volume"),s=e.querySelector(".plyr__controls__item.plyr__menu"),n=e.querySelector(".plyr__controls__item[data-plyr='fullscreen']"),a=e.querySelector(".plyr__controls__item.plyr__time--current.plyr__time");t?t.before(i):s?s.before(i):n?n.before(i):a&&a.before(i),e.querySelector(".plyr__controls")?.after(r)})}watermark(e={}){const{enabled:t,type:s,text:n,color:r}=e,i=this.player.elements?.container;if(!i||!t)return!1;let a=n;setTimeout(async()=>{if(["email","name"].includes(s))try{this.disabled=!0;const e=await wp.ajax.post("watermark_data",{nonce:this.nonce||window.h5vpBlock?.nonce});a=e.user[s]||window.location.origin,this.disabled=!1}catch{this.disabled=!1}let e="watermark";this.player.on("play",()=>{if(!this.isPremium)return!1;const t=setInterval(()=>{const t=document.querySelector(e);t&&i.removeChild(t),e="watermark"+Math.round(1e3*Math.random());const n=document.createElement(e);n.setAttribute("style","display: block !important"),"email"===s&&(n.innerText=a),i.appendChild(n),n.innerText=a,n.setAttribute("style",`position:absolute; display:block !important; opacity:1 !important;top: ${Math.round(90*Math.random())}% !important; left: ${Math.round(70*Math.random())}% !important; transform: none !important`),n.style.color=r,i.appendChild(n)},2e3);this.player.on("pause",()=>{setTimeout(()=>{clearInterval(t);const s=document.querySelector(e);s&&i.removeChild(s)},0)})})},100)}thumbInPause(){if(this.features?.thumbInPause?.enabled)if("custom"==this.features.thumbInPause?.type){const e=document.createElement("img"),t=this.player?.elements?.buttons?.play?.[0];this.player.on("ready",()=>{e.src=this.poster;const t=this.player?.elements?.buttons?.play?.[0];t&&(t.classList.add("thumbInPause"),this.poster&&t.appendChild(e))}),this.player.on("play",()=>{t?.classList.remove("thumbInPause")}),this.player.on("pause",()=>{t?.classList.add("thumbInPause")})}else this.player.on("pause",()=>{this.player?.elements?.container&&this.player?.elements?.container.classList.add("plyr--stopped")})}destroy(){this.player?.destroy()}chapterTimeToSeconds(e=""){const t=e.toString().match(/(\d+):(\d+)/);return null==t?parseInt(e):60*parseInt(t[1])+parseInt(t[2])}getTTT(e=10,t=10){return e/100*t-e/100*(100-t)}onClick(e,t){e&&e.addEventListener("click",t)}on(e,t){this.player?.ready?this.player?.on(e,t):this.onEvents.push({eventName:e,callback:t})}stop(){this.player?.stop()}setNonce(e){this.nonce=e}setVideoId(e){this.videoId=e}videoHls(){const e=()=>{if(window.Hls?.isSupported()){const e=new window.Hls;e.loadSource(this.player.media.src),this.player.on("ready",()=>{e.attachMedia(this.player.media)}),this.player.ready&&e.attachMedia(this.player.media),e.on(window.Hls.Events.MANIFEST_PARSED,()=>{["metadata","none"].includes(this.options.preload)&&setTimeout(()=>{e.stopLoad()},1e3),this.player.on("play",function(){e.startLoad()})}),this.player?.on("languagechange",()=>{setTimeout(()=>e.subtitleTrack=this.player.currentTrack,50)})}else console.warn("Hls does not support")};let t=document.getElementById("h5vp-hls-js");t?e():(t=document.createElement("script"),t.setAttribute("id","h5vp-hls-js"),t.src=this.local?.hls,document.getElementsByTagName("head")[0]?.prepend(t),t?.addEventListener("load",()=>e()))}videoDash(e=!1,t=null){let s=document.getElementById("h5vp-dash-js");if(s){if(dashjs){e&&(this.destroy(),this.media=this.container.querySelector("video"));const s=window.dashjs.MediaPlayer().create();s.initialize(this.media,e?t:this.media.src,!0),this.player=new Plyr(this.media,{...this.options,playsinline:!1,captions:{active:!0,update:!0}}),this.player.on("ready",()=>this.onReady()),window.player=this.player,window.dash=s}}else s=document.createElement("script"),s.setAttribute("id","h5vp-dash-js"),s.src=this.local?.dash,document.getElementsByTagName("head")[0]?.prepend(s),s.addEventListener("load",()=>{dashjs&&window.dashjs.MediaPlayer().create().initialize(this.player.media,this.player.media.src,!0)})}controlTouchAction(){if(document.body.offsetWidth>992)return!1;const e=this.player.elements?.container;if(!e)return!1;const t=this.player,s=e.querySelector(".plyr__video-wrapper"),n=document.createElement("span");n.classList.add("seekSecond"),s.appendChild(n),t.eventListeners.forEach(t=>{"dblclick"===t.type&&e.removeEventListener(t.type,t.callback,t.options)}),s.parentNode.addEventListener("dblclick",e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left;this.player.fullscreen.active&&(s.offsetWidth-150<r&&s.offsetWidth/2<r?(this.player.forward(this.options.seekTime),n.innerText=this.options.seekTime+" sec"):s.offsetWidth/2>r&&r<150&&(this.player.rewind(this.options.seekTime),n.innerText="-"+this.options.seekTime+" sec"),setTimeout(()=>{n.innerText=""},1e3)),r>150&&r<s.offsetWidth-150&&this.player.fullscreen.toggle()}),e.addEventListener("touchstart",e=>{this.player.fullscreen.active&&(this.touchClientX=e.touches[0].clientX,this.touchClientY=e.touches[0].clientY)},!1),e.addEventListener("touchend",e=>{if(!this.player.fullscreen.active)return;let s;s=e.changedTouches[0].clientX-this.touchClientX,s>5?(t.forward(parseInt(s)/10),n.innerText=parseInt(s/10)+" sec"):s<-5&&(t.rewind(Math.abs(s)/10),n.innerText=parseInt(s/10)+" sec"),setTimeout(()=>{n.innerText=""},1e3)},!1)}pauseOther(){if(location.pathname.includes("wp-admin"))return!1;window.hpublic?.pauseOther&&this.player.on("play",()=>{const e=this.player.elements.fullscreen?.dataset?.uniqueId;document.querySelectorAll(`video:not([data-unique-id="${e}"] video, a video)`).forEach(e=>e.pause())})}domAttributesToObjectList(e){const t=[];return e.forEach(e=>{const s=e.attributes,n={};for(let e=0;e<s.length;e++){const t=s[e];n[t.name]=t.value}t.push(n)}),t}getStoredSettings(){return JSON.parse(window.localStorage.getItem("plyr"))}landScapeWhenFullscreen(){window?.innerWidth<992&&(this.player.on("enterfullscreen",()=>{screen?.orientation?.lock("landscape")}),this.player.on("exitfullscreen",()=>{screen?.orientation?.lock("portrait")}))}saveState(){if(!this.player||!this.features.saveState)return;const e=`plyr:progress:${this.media.getAttribute("data-video-id")||function(e){if(e)try{const t=new URL(e).pathname.split("/").filter(e=>e.length>0).pop();if(!t)throw new Error("No valid name found in the URL path");let s=0;for(let e=0;e<t.length;e++)s=(s<<5)-s+t.charCodeAt(e),s|=0;return Math.abs(s).toString(36).substring(0,8)}catch(e){console.warn(e.message)}}(this.media.currentSrc||this.media.querySelector("source")?.src||"")||Math.random().toString(36).slice(2)}`,t=()=>{try{const t=JSON.parse(localStorage.getItem(e)||"0")||0,s=this.player.duration||0;t>10&&s>0&&t<s-5&&(this.player.currentTime=t)}catch(e){console.error(e)}};this.player?.on("ready",t),this.player?.on("loadedmetadata",t);const s=this.throttle(()=>{try{const t=Math.floor(this.player.currentTime||0);localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}},5e3);setTimeout(()=>{this.player.on("timeupdate",s),this.player.on("pause",s),this.player.on("seeking",s)},100),this.player.on("ended",()=>{try{localStorage.removeItem(e)}catch(e){console.error(e)}})}throttle(e,t){let s=0;return function(...n){const r=Date.now();r-s>=t&&(s=r,e.apply(this,n))}}},Q=({enabled:t,items:s})=>t?(0,e.createElement)(e.Fragment,null,s.map((t,s)=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("style",null,`\n              .overlay_item_${s} p{\n                padding: 5px 12px;\n              }\n              .overlay_item_${s} p,\n              .overlay_item_${s} img,\n              .overlay_item_${s} a {\n              color: ${t.color};\n              font-size: ${t.fontSize};\n              background-color: ${t.backgroundColor};\n              border-radius: 3px px;\n              opacity: ${t.opacity}\n            }\n            .overlay_item_${s} a:hover,\n            .overlay_item_${s} p:hover {\n              color: ${t.hoverColor};\n            }\n            `.replace(/\s+/g," ")),(0,e.createElement)("div",{key:s,className:`h5vp_overlay ${t.position} overlay_item_${s}`},"text"===t.type?(0,e.createElement)("p",null,t.link?(0,e.createElement)("a",{href:t.link,rel:"noreferrer",target:"_blank"},t.text):(0,e.createElement)(e.Fragment,null,t.text)):t.link?(0,e.createElement)("a",{className:"background-transparent",href:t.link,rel:"noreferrer",target:"_blank"},(0,e.createElement)("img",{src:t.logo})):(0,e.createElement)("img",{src:t.logo}))))):(0,e.createElement)(e.Fragment,null),Z=({setOpen:t,popup:s,poster:n,isBackend:r})=>{const{align:i,enabled:a,hasBtn:o,selector:l,type:c,btnText:p,btnStyle:d,isTrigger:u}=s,{padding:h,...m}=d||{};return(0,e.useEffect)(()=>{"button"===c&&o&&l&&a&&document.querySelector([".","#","["].includes(l)?`${l}`:`.${l}`)?.addEventListener("click",()=>{t(!0)})},[]),a&&o&&r?(0,e.createElement)("div",{className:"flex justify-center h5vp_popup_opener_wrapper"},(0,e.createElement)("span",{className:"h5vp_popup_area_title"},"trigger"),"Used Existing Button"):a&&"button"===c&&!o&&u?(0,e.createElement)("div",{className:"button"===c?`flex justify-${i}`:""},(0,e.createElement)("span",{onClick:()=>t(!1),className:"close popup_close_button"},"×")):(0,e.createElement)(e.Fragment,null,a&&(0,e.createElement)("div",{className:("button"===c?`flex justify-${i}`:"")+" h5vp_popup_opener_wrapper"},r&&(0,e.createElement)("span",{className:"h5vp_popup_area_title"},"trigger"),"poster"===c?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(e.Fragment,null,n?(0,e.createElement)("div",{className:"popup_opener",onClick:()=>t(!0)},(0,e.createElement)("button",{type:"button",className:"plyr__control plyr__control--overlaid","data-plyr":"play","aria-pressed":"false","aria-label":"Play"},(0,e.createElement)("svg",{"aria-hidden":"true",focusable:"false",className:"popup_play"},(0,e.createElement)("use",{xlinkHref:`${window.h5vpBlock?.plugin_url}img/plyr.svg#plyr-play`})),(0,e.createElement)("span",{className:"plyr__sr-only"},"Play")),(0,e.createElement)("img",{src:n,width:"100%"})):(0,e.createElement)("div",{className:"h5vp_poster_missing"},(0,e.createElement)("h3",null,"Video Poster Missing"),(0,e.createElement)("p",null,"Please add a poster image to display as the popup opener, or select the “Button” popup opener type from the settings.")))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("button",{className:"popup_opener",onClick:()=>t(!0),style:{...m,padding:Object.values(h).join(" ")}},p)),(0,e.createElement)("span",{onClick:()=>t(!1),className:"close"},"×")))},G=({poster:t,source:s,isPremium:n,className:r="",reference:i,...a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("video",{crossOrigin:!0,className:r,id:"player","data-poster":t||"",ref:i,src:s,...a,style:{width:"100%",maxWidth:"100%"}},n&&(0,e.createElement)(e.Fragment,null,!["m3u8","mpd"].includes(s?.split(".").pop())&&(0,e.createElement)(e.Fragment,null))),a["data-poster"]&&(0,e.createElement)("div",{className:"preload_poster",style:{background:`url(${a["data-poster"]})`}})),ee=({source:t="https://www.youtube.com/watch?v=MLpWrANjFbI",className:s="",...n})=>(0,e.createElement)("div",{className:`plyr__video-embed player_youtube ${s}`,id:"player",...n},(0,e.createElement)("iframe",{src:t?`${t}?origin=${window.location.origin}&iv_load_policy=3&amp;modestbranding=1&amp;playsinline=1&amp;showinfo=0&amp;rel=0&amp;enablejsapi=1`:"",allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),n["data-poster"]&&(0,e.createElement)("div",{className:"preload_poster",style:{background:`url(${n["data-poster"]})`}})),te=function(e){if(!e)return!1;const t=function(e){if(!e)return null;if(!isNaN(e))return e;const t=e.match(/^(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com\/(?:.*\/)?|player\.vimeo\.com\/video\/)(\d+)/);return t?t[1]:null}(String(e));return t?`https://player.vimeo.com/video/${t}`:isNaN(e)?void 0:`https://player.vimeo.com/video/${e}`},se=({endScreen:t,player:s})=>{const{enabled:n,text:r,btnText:i,btnLink:a}=t,o=(0,e.useRef)(null);return(0,e.useEffect)(()=>{s?.on("ended",()=>{n&&(s.stop(),o.current.style.display="block")})},[s]),(0,e.createElement)(e.Fragment,null,n&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{ref:o,className:"h5vp_end_screen"},(0,e.createElement)("span",{className:"close",onClick:()=>{o.current.style.display="none"}},"×"),(0,e.createElement)("div",{className:"content"},(0,e.createElement)("p",null,r),i&&(0,e.createElement)("a",{target:"_blank",rel:"noreferrer",href:a},i)))))},ne=({styles:t={},uniqueId:s})=>{const[n,r]=(0,e.useState)(null);return(0,e.useEffect)(()=>{let e="";"object"==typeof t&&Object.keys(t).map(n=>{if("object"==typeof t[n]){let r="";Object.keys(t[n]).map(e=>{var s;r+=`${s=e,s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}: ${t[n][e]};`}),e+=`#${s} ${[".","#"].includes(n[0])?"":"."}${n}{${r}} `}}),e+=`#${s} {--plyr-color-main: ${window.h5vpBlock?.brandColor}}`,r(e)},[t,s]),(0,e.createElement)("style",{dangerouslySetInnerHTML:{__html:n}})},re=({source:t="https://player.vimeo.com/video/76979871",className:s="",...n})=>(0,e.createElement)("div",{className:`plyr__video-embed player_vimeo ${s}`,id:"player",...n},(0,e.createElement)("iframe",{src:t?`${t}?loop=false&amp;byline=false&amp;portrait=false&amp;title=false&amp;speed=true&amp;transparent=0&amp;gesture=media`:"",allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),n["data-poster"]&&(0,e.createElement)("div",{className:"preload_poster",style:{background:`url(${n["data-poster"]})`}})),ie=function(e){let t="";for(let s=0;s<e;s++){const e=Math.floor(52*Math.random());t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(e)}return t},ae=({height:t="10px",width:s="10px",color:n="#3498db",className:r="",style:i={}})=>(0,e.createElement)("div",{className:`simple-loader ${r}`,style:{height:t,width:s,borderTopColor:n,...i}}),oe=({passwordProtected:t,setSrc:n,nonce:r,src:i,setQualities:a})=>{const{enabled:o,heading:l,button:c,key:p,errorMessage:d}=t,{data:u,refetch:h,isLoading:m}=s("h5vp_ajax_handler",{nonce:r,method:"check_password",model:"Video",key:p},!0),[y,f]=(0,e.useState)(null),[_,v]=(0,e.useState)(null),{text:w="Access"}=c||{};return(0,e.useEffect)(()=>{f(null),m||(u?.source?(n(u.source),a(u.quality)):null!==u&&f(d||"Password didn't matched"))},[m]),(0,e.createElement)(e.Fragment,null,o&&!i&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"password_form_overlay"}),(0,e.createElement)("div",{className:"password_form"},(0,e.createElement)("form",{onSubmit:e=>{e.preventDefault(),h({key:p,password:_})}},l&&(0,e.createElement)("h3",{className:"password_form_heading"},l),(0,e.createElement)("input",{type:"password",className:"password_form_input",placeholder:"Password",onChange:e=>v(e.target.value)}),(0,e.createElement)("button",{className:"password_form_button",disabled:m},m&&(0,e.createElement)(ae,{style:{borderWidth:"2px"}})," ",w),y&&(0,e.createElement)("p",{className:"password_form_error"},y)))))},le=function(e,t){try{const s=atob(e);let n="";for(let e=0;e<s.length;e++)n+=String.fromCharCode(s.charCodeAt(e)^t.charCodeAt(e%t.length));return n}catch{return e}},ce=({attributes:t,nonce:r=window.h5vpBlock?.nonce,isBackend:i=!1,clientId:a=null})=>{const{additionalCSS:o,additionalID:l,source:c,poster:p,provider:d,qualities:u,quality:h,subtitle:m,options:y,features:f,uniqueId:_,styles:v}=t,{popup:w,overlay:b,endScreen:g,passwordProtected:E={},hideYoutubeUI:S}=f,[k,P]=(0,e.useState)(E.enabled?"":d?c:le(c,_)),[T,I]=(0,e.useState)(!1),[L,N]=(0,e.useState)("library"===d?"self-hosted":d),{autoplay:C,muted:A,loop:M}=y,{data:z,isLoading:x}=s("pipe_handler",{nonce:r}),{data:$}=s("h5vp_ajax_handler",{nonce:r,src:k,method:"get_id_response",model:"Video"}),[q,j]=(0,e.useState)(u||h),F=(0,e.useRef)(null),O=(0,e.useRef)(null);return(0,e.useEffect)(()=>{T?O.current?.player.play():O.current?.player.pause()},[T]),(0,e.useEffect)(()=>{F.media=F.current?.querySelector("#player")},[F]),(0,e.useEffect)(()=>{const e=F.current?.querySelector("#player");return e&&(O.current=new K(e,y,{features:f,qualities:q,captions:m,isBackend:i,isPremium:z,provider:d}),O.current.poster=p),()=>{O.current?.destroy()}},[y,f,m]),(0,e.useEffect)(()=>{O.current&&!O.current?.nonce&&O.current.setNonce(r),O.current&&!O.current?.videoId&&O.current.setVideoId($)},[r,$,O.current]),(0,e.useEffect)(()=>{O.current&&O.current.setIsPremium(z),x||z||"self-hosted"===L||O.current?.destroy()},[z,x,L,O.current]),(0,e.useEffect)(()=>{L||(n(c)?N("youtube"):te(c)?N("vimeo"):N("self-hosted"))},[c]),(0,e.useEffect)(()=>{O.current?.player&&p&&O.current.setPoster(p)},[p]),(0,e.useEffect)(()=>{setTimeout(()=>{O.current?.player&&E.enabled&&(O.current.setSource(k,q),O.current.player.play())},100)},[k]),(0,e.useEffect)(()=>{window.sources?window.sources.push(c):window.sources=[c]},[k,c]),(0,e.useEffect)(()=>{P(E.enabled?"":d?c:le(c,_))},[c]),c?(0,e.createElement)("div",{ref:F,id:_,className:`h5vp_player_temp  ${w.enabled?"h5vp_popup_enabled":""} ${T?"h5vp_popup_open":""}`},(0,e.createElement)(ne,{styles:v,uniqueId:_}),(0,e.createElement)("style",null,o),z&&(0,e.createElement)(Z,{setOpen:I,popup:w,poster:p,isBackend:i,clientId:a,uniqueId:_}),(0,e.createElement)(oe,{passwordProtected:E,nonce:r,src:k,setSrc:P,source:c,setQualities:j}),(0,e.createElement)("div",{className:"plyr_wrapper "+(S?"hideUI":""),id:l,"data-unique-id":ie(5)},i&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"fake_close_btn"},"x")," ",(0,e.createElement)("span",{className:"h5vp_popup_area_title"},"popup")),(0,e.createElement)(e.Fragment,null,"vimeo"===L&&(0,e.createElement)(re,{source:te(k)}),"youtube"===L&&(0,e.createElement)(ee,{source:n(k)})),["self-hosted","amazons3"].includes(L)&&(0,e.createElement)(G,{qualities:k?q:[],source:k,poster:p,autoPlay:C,muted:A,loop:M?.active,preload:y.preload,isPremium:z,playsInline:y.playsinline}),z&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(se,{endScreen:g,player:O.current}),(0,e.createElement)(Q,{...b,player:O.current?.player})))):(0,e.createElement)("h3",null,"Video source missing")};document.addEventListener("DOMContentLoaded",function(){de()});const pe=t=>(0,e.createElement)(ce,{...t});window.addEventListener("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/H5VPPlayer.default",function(){de()})});const de=()=>{const s=document.querySelectorAll(".html5_video_players");s?.forEach(s=>{const n=(e=>{let t=null;try{t=JSON.parse(e)}catch(e){console.warn(e.message)}return t})(s.dataset.attributes);if(s.removeAttribute("data-attributes"),s.removeAttribute("data-data"),!n)return!1;const r=s.dataset.nonce;"object"==typeof n&&s&&(0,t.createRoot)(s).render((0,e.createElement)(pe,{attributes:n,nonce:r}))})}})();